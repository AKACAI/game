{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/GameApp.ts"],"names":["_decorator","Component","GameManager","UIManager","InputManager","MapManager","ObjectFactory","GameTipManager","ResManager","EventManager","EventConstants","ccclass","property","GameApp","gameLaunch","isOngoing","addEvent","GameControl","GameStart","onInitFinish","_resMgr","getInstance","_inputMgr","_uiMgr","_objectFactory","_gameTipMgr","_mapMgr","_gameMgr","setNextInitManager","init","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,U,iBAAAA,U;;AACFC,MAAAA,Y;;AACEC,MAAAA,c,kBAAAA,c;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;yBAGjBa,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb,SAC6BZ,SAD7B,CACuC;AAW5Ba,QAAAA,UAAU,GAAS;AACtB,eAAKC,SAAL,GAAiB,KAAjB;AACA;AAAA;AAAA,4CAAaC,QAAb,CAAsB;AAAA;AAAA,gDAAeC,WAAf,CAA2BC,SAAjD,EAA4D,KAAKC,YAAjE,EAA+E,IAA/E;AAEA,eAAKC,OAAL,GAAe;AAAA;AAAA,wCAAWC,WAAX,EAAf;AACA,eAAKC,SAAL,GAAiB;AAAA;AAAA,4CAAaD,WAAb,EAAjB;AACA,eAAKE,MAAL,GAAc;AAAA;AAAA,sCAAUF,WAAV,EAAd;AACA,eAAKG,cAAL,GAAsB;AAAA;AAAA,8CAAcH,WAAd,EAAtB;AACA,eAAKI,WAAL,GAAmB;AAAA;AAAA,gDAAeJ,WAAf,EAAnB;AACA,eAAKK,OAAL,GAAe;AAAA;AAAA,wCAAWL,WAAX,EAAf;AACA,eAAKM,QAAL,GAAgB;AAAA;AAAA,0CAAYN,WAAZ,EAAhB;;AAEA,eAAKD,OAAL,CAAaQ,kBAAb,CAAgC,KAAKN,SAArC;;AACA,eAAKA,SAAL,CAAeM,kBAAf,CAAkC,KAAKL,MAAvC;;AACA,eAAKA,MAAL,CAAYK,kBAAZ,CAA+B,KAAKJ,cAApC;;AACA,eAAKA,cAAL,CAAoBI,kBAApB,CAAuC,KAAKH,WAA5C,EAfsB,CAesC;;;AAC5D,eAAKA,WAAL,CAAiBG,kBAAjB,CAAoC,KAAKF,OAAzC,EAhBsB,CAgBsC;;;AAC5D,eAAKA,OAAL,CAAaE,kBAAb,CAAgC,KAAKD,QAArC;;AAEA,eAAKP,OAAL,CAAaS,IAAb;AACH;;AAEOV,QAAAA,YAAY,GAAG;AACnB,eAAKJ,SAAL,GAAiB,IAAjB;AACH;;AAEMe,QAAAA,MAAM,CAACC,SAAD,EAA0B;AACnC,cAAI,CAAC,KAAKhB,SAAV,EAAqB;AACjB;AACH;;AACD;AAAA;AAAA,0CAAYM,WAAZ,GAA0BS,MAA1B,CAAiCC,SAAjC;AACH;;AA1CkC,O","sourcesContent":["import { _decorator, Component } from \"cc\";\r\nimport { GameManager } from \"./manager/game_manager/GameManager\";\r\nimport { UIManager } from \"./manager/ui_manager/UIManager\";\r\nimport { InputManager } from \"./manager/InputManager\";\r\nimport { MapManager } from \"./manager/map_manager/MapManager\";\r\nimport { ObjectFactory } from \"./modules/game/ObjectFactory\";\r\nimport { GameTipManager } from \"./modules/ui/game_tip/GameTipManager\";\r\nimport { ResManager } from \"./manager/ResManager\";\r\nimport EventManager from \"./manager/event_manager/EventManager\";\r\nimport { EventConstants } from \"./manager/event_manager/EventConstants\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GameApp')\r\nexport class GameApp extends Component {\r\n    private isOngoing: boolean;\r\n\r\n    private _resMgr: ResManager;\r\n    private _inputMgr: InputManager;\r\n    private _uiMgr: UIManager;\r\n    private _objectFactory: ObjectFactory;\r\n    private _gameTipMgr: GameTipManager;\r\n    private _mapMgr: MapManager;\r\n    private _gameMgr: GameManager;\r\n\r\n    public gameLaunch(): void {\r\n        this.isOngoing = false;\r\n        EventManager.addEvent(EventConstants.GameControl.GameStart, this.onInitFinish, this);\r\n\r\n        this._resMgr = ResManager.getInstance();\r\n        this._inputMgr = InputManager.getInstance();\r\n        this._uiMgr = UIManager.getInstance();\r\n        this._objectFactory = ObjectFactory.getInstance();\r\n        this._gameTipMgr = GameTipManager.getInstance();\r\n        this._mapMgr = MapManager.getInstance();\r\n        this._gameMgr = GameManager.getInstance();\r\n\r\n        this._resMgr.setNextInitManager(this._inputMgr);\r\n        this._inputMgr.setNextInitManager(this._uiMgr);\r\n        this._uiMgr.setNextInitManager(this._objectFactory);\r\n        this._objectFactory.setNextInitManager(this._gameTipMgr);   // 这些可以在gameManager之后\r\n        this._gameTipMgr.setNextInitManager(this._mapMgr);          // 这些可以在gameManager之后\r\n        this._mapMgr.setNextInitManager(this._gameMgr);\r\n\r\n        this._resMgr.init();\r\n    }\r\n\r\n    private onInitFinish() {\r\n        this.isOngoing = true;\r\n    }\r\n\r\n    public update(deltaTime: number): void {\r\n        if (!this.isOngoing) {\r\n            return;\r\n        }\r\n        GameManager.getInstance().update(deltaTime);\r\n    }\r\n}\r\n\r\n\r\n"]}