{"version":3,"sources":["file:///E:/education_game/game/assets/scripts/modules/ui/game_tip/GameTipManager.ts"],"names":["_decorator","Singleton","PanelName","UIManager","ccclass","property","GameTipManager","showObjectId","init","getInstance","openPanel","GameTip","gameTipView","getPanel","hideTip","nextInitManager","isShowing","setNextInitManager","showTip","name","data","moveTip","pos","node","setWorldPosition","x","y","hideTips"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;;;;;;;;;OAKH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;gCAGjBM,c,WADZF,OAAO,CAAC,gBAAD,C,gBAAR,MACaE,cADb;AAAA;AAAA,kCACkE;AAAA;AAAA;AAAA,eAGtDC,YAHsD,GAG/B,CAH+B;AAAA;;AAIvDC,QAAAA,IAAI,GAAG;AACV;AAAA;AAAA,sCAAUC,WAAV,GAAwBC,SAAxB,CAAkC;AAAA;AAAA,sCAAUC,OAA5C,EAAqD,MAAM;AACvD,iBAAKC,WAAL,GAAmB;AAAA;AAAA,wCAAUH,WAAV,GAAwBI,QAAxB,CAAiC;AAAA;AAAA,wCAAUF,OAA3C,CAAnB;AACA,iBAAKG,OAAL;AACH,WAHD;;AAIA,cAAI,KAAKC,eAAT,EAA0B;AACtB,iBAAKA,eAAL,CAAqBP,IAArB;AACH;;AACD,eAAKQ,SAAL,GAAiB,KAAjB;AACH;;AAGMC,QAAAA,kBAAkB,CAACF,eAAD,EAAkC;AACvD,eAAKA,eAAL,GAAuBA,eAAvB;AACH;;AAEMG,QAAAA,OAAO,CAACX,YAAD,EAAuBY,IAAvB,EAAqCC,IAArC,EAA0D;AACpE,cAAI,CAAC,KAAKR,WAAV,EAAuB;AACnB;AACH;;AACD,cAAI,CAAC,KAAKI,SAAV,EAAqB;AACjB;AACH;;AACD,cAAI,KAAKT,YAAL,IAAqBA,YAAzB,EAAuC;AACnC;AACH;;AACD,eAAKA,YAAL,GAAoBA,YAApB;AACA,eAAKK,WAAL,CAAiBM,OAAjB,CAAyBC,IAAzB,EAA+BC,IAA/B;AACH;;AAEMC,QAAAA,OAAO,CAACC,GAAD,EAAY;AACtB,cAAI,CAAC,KAAKV,WAAV,EAAuB;AACnB;AACH;;AACD,cAAI,CAAC,KAAKI,SAAV,EAAqB;AACjB;AACH;;AACD,eAAKJ,WAAL,CAAiBW,IAAjB,CAAsBC,gBAAtB,CAAuCF,GAAG,CAACG,CAA3C,EAA8CH,GAAG,CAACI,CAAlD,EAAqD,CAArD;AACH;;AAEMZ,QAAAA,OAAO,GAAG;AACb,cAAI,CAAC,KAAKF,WAAV,EAAuB;AACnB;AACH;;AACD,cAAI,KAAKI,SAAT,EAAoB;AAChB;AACH;;AACD,eAAKJ,WAAL,CAAiBe,QAAjB;AACA,eAAKpB,YAAL,GAAoB,CAApB;AACH;;AArD6D,O","sourcesContent":["import { _decorator, Vec2 } from \"cc\";\nimport { Singleton } from \"../../../common/Singleton\";\nimport { PanelName } from \"../../../manager/ui_manager/Name2Panel\";\nimport { UIManager } from \"../../../manager/ui_manager/UIManager\";\nimport { GameTipData } from \"./GameTipItem\";\nimport { GameTipView } from \"./GameTipView\";\nimport { IPreInit } from \"../../../common/IPreInit\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('GameTipManager')\nexport class GameTipManager extends Singleton implements IPreInit {\n    private gameTipView: GameTipView;\n    private isShowing: boolean;\n    private showObjectId: number = 0;\n    public init() {\n        UIManager.getInstance().openPanel(PanelName.GameTip, () => {\n            this.gameTipView = UIManager.getInstance().getPanel(PanelName.GameTip) as GameTipView;\n            this.hideTip();\n        });\n        if (this.nextInitManager) {\n            this.nextInitManager.init();\n        }\n        this.isShowing = false;\n    }\n\n    public nextInitManager: IPreInit;\n    public setNextInitManager(nextInitManager: IPreInit): void {\n        this.nextInitManager = nextInitManager;\n    }\n\n    public showTip(showObjectId: number, name: string, data: GameTipData[]) {\n        if (!this.gameTipView) {\n            return;\n        }\n        if (!this.isShowing) {\n            return;\n        }\n        if (this.showObjectId == showObjectId) {\n            return;\n        }\n        this.showObjectId = showObjectId;\n        this.gameTipView.showTip(name, data);\n    }\n\n    public moveTip(pos: Vec2) {\n        if (!this.gameTipView) {\n            return;\n        }\n        if (!this.isShowing) {\n            return;\n        }\n        this.gameTipView.node.setWorldPosition(pos.x, pos.y, 0);\n    }\n\n    public hideTip() {\n        if (!this.gameTipView) {\n            return;\n        }\n        if (this.isShowing) {\n            return;\n        }\n        this.gameTipView.hideTips();\n        this.showObjectId = 0;\n    }\n}\n\n\n"]}