{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/modules/game/ObjectFactory.ts"],"names":["_decorator","Node","Singleton","GameManager","ObjectBase","RightTriangleObject","SquareObject","ccclass","property","ObjectFactory","init","map_root","getInstance","gameRoot","getChildByName","objects_pre","createObject","type","newNode","setParent","active","component","addComponent","objectType2component","create","push","getObject","shapeParam","pos","objectData","parent","object","shift","node","name","setPosition","givebackObject","destroyObject","destroy","ObjectType","Square","RightTriangle"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAkBC,MAAAA,I,OAAAA,I;;AADlBC,MAAAA,S,cAAAA,S;;AAEAC,MAAAA,W,4BAAAA,W;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,mB,iBAAAA,mB;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;+BAGjBS,a,WADZF,OAAO,CAAC,eAAD,C,gBAAR,MACaE,aADb;AAAA;AAAA,kCAC6C;AAIlCC,QAAAA,IAAI,GAAG;AACV,eAAKC,QAAL,GAAgB;AAAA;AAAA,0CAAYC,WAAZ,GAA0BC,QAA1B,CAAmCC,cAAnC,CAAkD,UAAlD,CAAhB;AACA,eAAKC,WAAL,GAAmB,EAAnB;AACH;;AAEMC,QAAAA,YAAY,CAACC,IAAD,EAA+B;AAC9C,cAAIC,OAAO,GAAG,IAAIjB,IAAJ,EAAd;AACAiB,UAAAA,OAAO,CAACC,SAAR,CAAkB,KAAKR,QAAvB;AACAO,UAAAA,OAAO,CAACE,MAAR,GAAiB,KAAjB;AACA,cAAIC,SAAS,GAAGH,OAAO,CAACI,YAAR,CAAqBC,oBAAoB,CAACN,IAAD,CAAzC,CAAhB;AACAI,UAAAA,SAAS,CAACG,MAAV;AACA,eAAKT,WAAL,CAAiBU,IAAjB,CAAsBJ,SAAtB;AACA,iBAAOA,SAAP;AACH;;AAEMK,QAAAA,SAAS,CAACT,IAAD,EAAmBU,UAAnB,EAAoCC,GAApC,EAA+CC,UAA/C,EAAgEC,MAAhE,EAA2F;AACvG,cAAIC,MAAM,GAAG,KAAKhB,WAAL,CAAiBiB,KAAjB,EAAb;;AACA,cAAI,CAACD,MAAL,EAAa;AACTA,YAAAA,MAAM,GAAG,KAAKf,YAAL,CAAkBC,IAAlB,CAAT;AACAc,YAAAA,MAAM,GAAG,KAAKhB,WAAL,CAAiBiB,KAAjB,EAAT;AACH;;AACDD,UAAAA,MAAM,CAACE,IAAP,CAAYC,IAAZ,GAAmBL,UAAU,CAACK,IAA9B;AACAH,UAAAA,MAAM,CAACE,IAAP,CAAYd,SAAZ,CAAsBW,MAAM,GAAGA,MAAH,GAAY,KAAKnB,QAA7C;AACAoB,UAAAA,MAAM,CAACE,IAAP,CAAYE,WAAZ,CAAwBP,GAAxB;AACAG,UAAAA,MAAM,CAACrB,IAAP,CAAYO,IAAZ,EAAkBU,UAAlB,EAA8BE,UAA9B;AACAE,UAAAA,MAAM,CAACE,IAAP,CAAYb,MAAZ,GAAqB,IAArB;AACA,iBAAOW,MAAP;AACH;;AAEMK,QAAAA,cAAc,CAACL,MAAD,EAAqB;AACtCA,UAAAA,MAAM,CAACE,IAAP,CAAYb,MAAZ,GAAqB,KAArB;AACA,eAAKL,WAAL,CAAiBU,IAAjB,CAAsBM,MAAtB;AACH;;AAEMM,QAAAA,aAAa,CAACN,MAAD,EAAqB;AACrCA,UAAAA,MAAM,CAACE,IAAP,CAAYK,OAAZ;AACH;;AAxCwC,O;;4BA2CjCC,U,0BAAAA,U;AAAAA,QAAAA,U,CAAAA,U;AAAAA,QAAAA,U,CAAAA,U;eAAAA,U;;;AAMNhB,MAAAA,oB,GAAuB;AACzB,SAACgB,UAAU,CAACC,MAAZ,GAAqB;AAAA;AAAA;AAAA;AAAA,qCADI;AAEzB,SAACD,UAAU,CAACE,aAAZ,GAA4B;AAAA;AAAA;AAAA;AAAA;AAFH,O","sourcesContent":["import { Singleton } from \"Singleton\";\r\nimport { _decorator, Vec3, Node } from \"cc\";\r\nimport { GameManager } from \"game_manager/GameManager\";\r\nimport { ObjectBase } from \"./ObjectBase\";\r\nimport { RightTriangleObject } from \"./game_objects/RightTriangleObject\";\r\nimport { SquareObject } from \"./game_objects/SquareObject\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ObjectFactory')\r\nexport class ObjectFactory extends Singleton {\r\n    private map_root: Node;\r\n    private objects_pre: ObjectBase[];\r\n\r\n    public init() {\r\n        this.map_root = GameManager.getInstance().gameRoot.getChildByName(\"map_root\");\r\n        this.objects_pre = [];\r\n    }\r\n\r\n    public createObject(type: ObjectType): ObjectBase {\r\n        let newNode = new Node();\r\n        newNode.setParent(this.map_root);\r\n        newNode.active = false;\r\n        let component = newNode.addComponent(objectType2component[type]);\r\n        component.create();\r\n        this.objects_pre.push(component);\r\n        return component;\r\n    }\r\n\r\n    public getObject(type: ObjectType, shapeParam: any, pos: Vec3, objectData: any, parent?: Node): ObjectBase {\r\n        let object = this.objects_pre.shift();\r\n        if (!object) {\r\n            object = this.createObject(type);\r\n            object = this.objects_pre.shift();\r\n        }\r\n        object.node.name = objectData.name;\r\n        object.node.setParent(parent ? parent : this.map_root);\r\n        object.node.setPosition(pos);\r\n        object.init(type, shapeParam, objectData);\r\n        object.node.active = true;\r\n        return object;\r\n    }\r\n\r\n    public givebackObject(object: ObjectBase) {\r\n        object.node.active = false;\r\n        this.objects_pre.push(object);\r\n    }\r\n\r\n    public destroyObject(object: ObjectBase) {\r\n        object.node.destroy();\r\n    }\r\n}\r\n\r\nexport enum ObjectType {\r\n    Square = 1,\r\n    RightTriangle = 2,\r\n\r\n}\r\n\r\nconst objectType2component = {\r\n    [ObjectType.Square]: SquareObject || ObjectBase,\r\n    [ObjectType.RightTriangle]: RightTriangleObject || ObjectBase,\r\n}\r\n"]}