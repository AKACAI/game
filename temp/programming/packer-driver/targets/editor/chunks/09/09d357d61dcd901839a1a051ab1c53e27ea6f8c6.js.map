{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/modules/ui/game_start_ui/LevelItem.ts"],"names":["_decorator","Component","Sprite","NodeHelper","Utils","ccclass","property","LevelItem","data","undefined","maxOpacity","init","img_mode","node","getChildByName","lb_mode_name","img_state_mask","active","setProgressOpacity","addListener","setNodeClickEvent","clickCb","setData","setLabelString","name","progress","opacity","clamp","changeMaskOpacity","opacityCpt","getComponent","color","a","dispose"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAmBC,MAAAA,S,OAAAA,S;AAAsCC,MAAAA,M,OAAAA,M;;AAC3DC,MAAAA,U;;AACAC,MAAAA,K;;;;;;;;;OAED;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;2BAGjBO,S,WADZF,OAAO,CAAC,WAAD,C,gBAAR,MACaE,SADb,SAC+BN,SAD/B,CACyC;AAAA;AAAA;AAAA,eAG7BO,IAH6B,GAGJC,SAHI;AAAA,eAIpBC,UAJoB,GAIC,GAJD;AAAA;;AAM9BC,QAAAA,IAAI,GAAG;AACV,eAAKC,QAAL,GAAgB,KAAKC,IAAL,CAAUC,cAAV,CAAyB,UAAzB,CAAhB;AACA,eAAKC,YAAL,GAAoB,KAAKF,IAAL,CAAUC,cAAV,CAAyB,cAAzB,CAApB;AACA,eAAKE,cAAL,GAAsB,KAAKH,IAAL,CAAUC,cAAV,CAAyB,gBAAzB,CAAtB;AACA,eAAKE,cAAL,CAAoBC,MAApB,GAA6B,IAA7B;AACA,eAAKC,kBAAL,CAAwB,CAAxB;AACA,eAAKC,WAAL;AACH;;AAEOA,QAAAA,WAAW,GAAG;AAClB;AAAA;AAAA,wCAAWC,iBAAX,CAA6B,KAAKP,IAAlC,EAAwC,MAAM;AAC1C,gBAAI,KAAKL,IAAL,IAAa,KAAKA,IAAL,CAAUa,OAA3B,EAAoC;AAChC,mBAAKb,IAAL,CAAUa,OAAV;AACH;AACJ,WAJD,EAIG,IAJH,EAISZ,SAJT,EAIoB,KAJpB;AAKH;;AAEMa,QAAAA,OAAO,CAACd,IAAD,EAAyB;AACnC,eAAKA,IAAL,GAAYA,IAAZ;AACA;AAAA;AAAA,wCAAWe,cAAX,CAA0B,KAAKR,YAA/B,EAA6CP,IAAI,CAACgB,IAAlD;AACH;;AAEMN,QAAAA,kBAAkB,CAACO,QAAD,EAAmB;AACxC,cAAIC,OAAO,GAAG;AAAA;AAAA,8BAAMC,KAAN,CAAYF,QAAQ,GAAG,KAAKf,UAA5B,EAAwC,CAAxC,EAA2C,KAAKA,UAAhD,CAAd;AACA,eAAKkB,iBAAL,CAAuBF,OAAvB;AACH;;AAEOE,QAAAA,iBAAiB,CAACF,OAAD,EAAkB;AACvC,cAAIG,UAAkB,GAAG,KAAKb,cAAL,CAAoBc,YAApB,CAAiC5B,MAAjC,CAAzB;;AACA,cAAI2B,UAAJ,EAAgB;AACZ,gBAAIE,KAAY,GAAGF,UAAU,CAACE,KAA9B;AACAA,YAAAA,KAAK,CAACC,CAAN,GAAU;AAAA;AAAA,gCAAML,KAAN,CAAYD,OAAZ,EAAqB,CAArB,EAAwB,GAAxB,CAAV;AACAG,YAAAA,UAAU,CAACE,KAAX,GAAmBA,KAAnB;AACH;AACJ;;AAEME,QAAAA,OAAO,GAAG,CAEhB;;AA5CoC,O","sourcesContent":["import { _decorator, Color, Component, instantiate, Node, Prefab, Sprite, UIOpacity } from \"cc\";\nimport NodeHelper from \"../../../common/NodeHelper\";\nimport Utils from \"../../../utils/Utils\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('LevelItem')\nexport class LevelItem extends Component {\n    private bg_item\n\n    private data: ISetDataModeItem = undefined;\n    private readonly maxOpacity: number = 100;\n\n    public init() {\n        this.img_mode = this.node.getChildByName(\"img_mode\");\n        this.lb_mode_name = this.node.getChildByName(\"lb_mode_name\");\n        this.img_state_mask = this.node.getChildByName(\"img_state_mask\");\n        this.img_state_mask.active = true;\n        this.setProgressOpacity(0);\n        this.addListener();\n    }\n\n    private addListener() {\n        NodeHelper.setNodeClickEvent(this.node, () => {\n            if (this.data && this.data.clickCb) {\n                this.data.clickCb();\n            }\n        }, this, undefined, false);\n    }\n\n    public setData(data: ISetDataModeItem) {\n        this.data = data;\n        NodeHelper.setLabelString(this.lb_mode_name, data.name);\n    }\n\n    public setProgressOpacity(progress: number) {\n        let opacity = Utils.clamp(progress * this.maxOpacity, 0, this.maxOpacity);\n        this.changeMaskOpacity(opacity);\n    }\n\n    private changeMaskOpacity(opacity: number) {\n        let opacityCpt: Sprite = this.img_state_mask.getComponent(Sprite);\n        if (opacityCpt) {\n            let color: Color = opacityCpt.color;\n            color.a = Utils.clamp(opacity, 0, 255);\n            opacityCpt.color = color;\n        }\n    }\n\n    public dispose() {\n\n    }\n}\n\nexport interface ISetDataModeItem {\n    name: string,\n    bg_path: string,\n    clickCb: Function,\n}"]}