{"version":3,"sources":["file:///E:/education_game/game/assets/scripts/manager/InputManager.ts"],"names":["_decorator","Node","Vec2","Singleton","UIManager","UILayer","ccclass","property","InputManager","init","_layerMouseInput","getInstance","getLayerNode","mouse_input","_mousePos","_isLeftBtnPressed","initFunc","nextInitManager","setNextInitManager","mousePos","getMouseData","mouseParam","isLeftBtnPressed","on","EventType","MOUSE_MOVE","mouseEvent","getUILocation","MOUSE_DOWN","MOUSE_UP"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;AAClBC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;AAAWC,MAAAA,O,iBAAAA,O;;;;;;;;;OAEd;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb;AAAA;AAAA,kCACgE;AAKrDC,QAAAA,IAAI,GAAG;AACV,eAAKC,gBAAL,GAAwB;AAAA;AAAA,sCAAUC,WAAV,GAAwBC,YAAxB,CAAqC;AAAA;AAAA,kCAAQC,WAA7C,CAAxB;AAEA,eAAKC,SAAL,GAAiB,IAAIZ,IAAJ,EAAjB;AACA,eAAKa,iBAAL,GAAyB,KAAzB;AACA,eAAKC,QAAL;;AACA,cAAI,KAAKC,eAAT,EAA0B;AACtB,iBAAKA,eAAL,CAAqBR,IAArB;AACH;AACJ;;AAGMS,QAAAA,kBAAkB,CAACD,eAAD,EAAkC;AACvD,eAAKA,eAAL,GAAuBA,eAAvB;AACH;;AAEkB,YAARE,QAAQ,GAAS;AACxB,iBAAO,KAAKL,SAAZ;AACH;;AAEMM,QAAAA,YAAY,GAAe;AAC9B,cAAIC,UAAsB,GAAG;AACzBF,YAAAA,QAAQ,EAAE,KAAKL,SADU;AAEzBQ,YAAAA,gBAAgB,EAAE,KAAKP;AAFE,WAA7B;AAIA,iBAAOM,UAAP;AACH;;AAEOL,QAAAA,QAAQ,GAAG;AACf,eAAKN,gBAAL,CAAsBa,EAAtB,CAAyBtB,IAAI,CAACuB,SAAL,CAAeC,UAAxC,EAAqDC,UAAD,IAAgB;AAChE,iBAAKZ,SAAL,GAAiBY,UAAU,CAACC,aAAX,EAAjB;AACH,WAFD;;AAIA,eAAKjB,gBAAL,CAAsBa,EAAtB,CAAyBtB,IAAI,CAACuB,SAAL,CAAeI,UAAxC,EAAoD,MAAM;AACtD,iBAAKb,iBAAL,GAAyB,IAAzB;AACH,WAFD;;AAIA,eAAKL,gBAAL,CAAsBa,EAAtB,CAAyBtB,IAAI,CAACuB,SAAL,CAAeK,QAAxC,EAAkD,MAAM;AACpD,iBAAKd,iBAAL,GAAyB,KAAzB;AACH,WAFD;AAGH;;AA7C2D,O","sourcesContent":["\nimport { _decorator, Node, Vec2 } from 'cc';\nimport { Singleton } from '../common/Singleton';\nimport { UIManager, UILayer } from './ui_manager/UIManager';\nimport { IPreInit } from '../common/IPreInit';\nconst { ccclass, property } = _decorator;\n\n@ccclass('InputManager')\nexport class InputManager extends Singleton implements IPreInit {\n    private _layerMouseInput: Node;\n    private _mousePos: Vec2;\n    private _isLeftBtnPressed: boolean;\n\n    public init() {\n        this._layerMouseInput = UIManager.getInstance().getLayerNode(UILayer.mouse_input);\n\n        this._mousePos = new Vec2();\n        this._isLeftBtnPressed = false;\n        this.initFunc();\n        if (this.nextInitManager) {\n            this.nextInitManager.init();\n        }\n    }\n\n    public nextInitManager: IPreInit;\n    public setNextInitManager(nextInitManager: IPreInit): void {\n        this.nextInitManager = nextInitManager;\n    }\n\n    public get mousePos(): Vec2 {\n        return this._mousePos;\n    }\n\n    public getMouseData(): MouseParam {\n        let mouseParam: MouseParam = {\n            mousePos: this._mousePos,\n            isLeftBtnPressed: this._isLeftBtnPressed,\n        }\n        return mouseParam;\n    }\n\n    private initFunc() {\n        this._layerMouseInput.on(Node.EventType.MOUSE_MOVE, (mouseEvent) => {\n            this._mousePos = mouseEvent.getUILocation();\n        });\n\n        this._layerMouseInput.on(Node.EventType.MOUSE_DOWN, () => {\n            this._isLeftBtnPressed = true;\n        });\n\n        this._layerMouseInput.on(Node.EventType.MOUSE_UP, () => {\n            this._isLeftBtnPressed = false;\n        });\n    }\n}\n\nexport interface MouseParam {\n    mousePos: Vec2,\n    isLeftBtnPressed: boolean,\n}"]}