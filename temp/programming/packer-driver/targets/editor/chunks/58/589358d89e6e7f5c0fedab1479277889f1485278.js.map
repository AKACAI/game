{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/manager/InputManager.ts"],"names":["_decorator","Node","Vec2","Singleton","UIManager","UILayer","ccclass","property","InputManager","init","_layerMouseInput","getInstance","getLayerNode","mouse_input","_mousePos","initFunc","nextInitManager","setNextInitManager","mousePos","on","EventType","MOUSE_MOVE","mouseEvent","getUILocation"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;AAClBC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;AAAWC,MAAAA,O,iBAAAA,O;;;;;;;;;OAEd;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb;AAAA;AAAA,kCACgE;AAIrDC,QAAAA,IAAI,GAAG;AACV,eAAKC,gBAAL,GAAwB;AAAA;AAAA,sCAAUC,WAAV,GAAwBC,YAAxB,CAAqC;AAAA;AAAA,kCAAQC,WAA7C,CAAxB;AAEA,eAAKC,SAAL,GAAiB,IAAIZ,IAAJ,EAAjB;AACA,eAAKa,QAAL;;AACA,cAAI,KAAKC,eAAT,EAA0B;AACtB,iBAAKA,eAAL,CAAqBP,IAArB;AACH;AACJ;;AAGMQ,QAAAA,kBAAkB,CAACD,eAAD,EAAkC;AACvD,eAAKA,eAAL,GAAuBA,eAAvB;AACH;;AAEkB,YAARE,QAAQ,GAAS;AACxB,iBAAO,KAAKJ,SAAZ;AACH;;AAEOC,QAAAA,QAAQ,GAAG;AACf;AACA,eAAKL,gBAAL,CAAsBS,EAAtB,CAAyBlB,IAAI,CAACmB,SAAL,CAAeC,UAAxC,EAAqDC,UAAD,IAAgB;AAChE;AACA,iBAAKR,SAAL,GAAiBQ,UAAU,CAACC,aAAX,EAAjB,CAFgE,CAGhE;AACH,WAJD;AAKH;;AA9B2D,O","sourcesContent":["\r\nimport { _decorator, Node, Vec2 } from 'cc';\r\nimport { Singleton } from '../common/Singleton';\r\nimport { UIManager, UILayer } from './ui_manager/UIManager';\r\nimport { IPreInit } from '../common/IPreInit';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('InputManager')\r\nexport class InputManager extends Singleton implements IPreInit {\r\n    private _layerMouseInput: Node;\r\n    private _mousePos: Vec2;\r\n\r\n    public init() {\r\n        this._layerMouseInput = UIManager.getInstance().getLayerNode(UILayer.mouse_input);\r\n\r\n        this._mousePos = new Vec2();\r\n        this.initFunc();\r\n        if (this.nextInitManager) {\r\n            this.nextInitManager.init();\r\n        }\r\n    }\r\n\r\n    public nextInitManager: IPreInit;\r\n    public setNextInitManager(nextInitManager: IPreInit): void {\r\n        this.nextInitManager = nextInitManager;\r\n    }\r\n\r\n    public get mousePos(): Vec2 {\r\n        return this._mousePos;\r\n    }\r\n\r\n    private initFunc() {\r\n        // TODO 这样的检测很不准确\r\n        this._layerMouseInput.on(Node.EventType.MOUSE_MOVE, (mouseEvent) => {\r\n            // console.log(mouseEvent.getUILocation())\r\n            this._mousePos = mouseEvent.getUILocation();\r\n            // console.log(this._mousePos)\r\n        })\r\n    }\r\n}\r\n\r\n\r\n"]}