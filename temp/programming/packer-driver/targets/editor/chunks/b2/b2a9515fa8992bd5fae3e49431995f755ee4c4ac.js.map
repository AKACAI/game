{"version":3,"sources":["file:///E:/education_game/game/assets/scripts/manager/InputManager.ts"],"names":["_decorator","Node","Vec2","Singleton","UIManager","UILayer","ccclass","property","InputManager","init","_layerMouseInput","getInstance","getLayerNode","mouse_input","_mousePos","initFunc","nextInitManager","setNextInitManager","mousePos","on","EventType","MOUSE_MOVE","mouseEvent","getUILocation"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;AAClBC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;AAAWC,MAAAA,O,iBAAAA,O;;;;;;;;;OAEd;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;8BAGjBQ,Y,WADZF,OAAO,CAAC,cAAD,C,gBAAR,MACaE,YADb;AAAA;AAAA,kCACgE;AAIrDC,QAAAA,IAAI,GAAG;AACV,eAAKC,gBAAL,GAAwB;AAAA;AAAA,sCAAUC,WAAV,GAAwBC,YAAxB,CAAqC;AAAA;AAAA,kCAAQC,WAA7C,CAAxB;AAEA,eAAKC,SAAL,GAAiB,IAAIZ,IAAJ,EAAjB;AACA,eAAKa,QAAL;;AACA,cAAI,KAAKC,eAAT,EAA0B;AACtB,iBAAKA,eAAL,CAAqBP,IAArB;AACH;AACJ;;AAGMQ,QAAAA,kBAAkB,CAACD,eAAD,EAAkC;AACvD,eAAKA,eAAL,GAAuBA,eAAvB;AACH;;AAEkB,YAARE,QAAQ,GAAS;AACxB,iBAAO,KAAKJ,SAAZ;AACH;;AAEOC,QAAAA,QAAQ,GAAG;AACf;AACA,eAAKL,gBAAL,CAAsBS,EAAtB,CAAyBlB,IAAI,CAACmB,SAAL,CAAeC,UAAxC,EAAqDC,UAAD,IAAgB;AAChE;AACA,iBAAKR,SAAL,GAAiBQ,UAAU,CAACC,aAAX,EAAjB,CAFgE,CAGhE;AACH,WAJD;AAKH;;AA9B2D,O","sourcesContent":["\nimport { _decorator, Node, Vec2 } from 'cc';\nimport { Singleton } from '../common/Singleton';\nimport { UIManager, UILayer } from './ui_manager/UIManager';\nimport { IPreInit } from '../common/IPreInit';\nconst { ccclass, property } = _decorator;\n\n@ccclass('InputManager')\nexport class InputManager extends Singleton implements IPreInit {\n    private _layerMouseInput: Node;\n    private _mousePos: Vec2;\n\n    public init() {\n        this._layerMouseInput = UIManager.getInstance().getLayerNode(UILayer.mouse_input);\n\n        this._mousePos = new Vec2();\n        this.initFunc();\n        if (this.nextInitManager) {\n            this.nextInitManager.init();\n        }\n    }\n\n    public nextInitManager: IPreInit;\n    public setNextInitManager(nextInitManager: IPreInit): void {\n        this.nextInitManager = nextInitManager;\n    }\n\n    public get mousePos(): Vec2 {\n        return this._mousePos;\n    }\n\n    private initFunc() {\n        // TODO 这样的检测很不准确\n        this._layerMouseInput.on(Node.EventType.MOUSE_MOVE, (mouseEvent) => {\n            // console.log(mouseEvent.getUILocation())\n            this._mousePos = mouseEvent.getUILocation();\n            // console.log(this._mousePos)\n        })\n    }\n}\n\n\n"]}