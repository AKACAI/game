{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/manager/map_manager/MapData.ts"],"names":["MapData","_decorator","Singleton","LogManager","ResManager","LoadType","ccclass","property","inited","init","mapDatas","getInstance","loadBundle","loadMapData","mapName","loadAsset","JSON","json","mapData","err","error","getMapData","warn"],"mappings":";;;wIAwBqBA,O;;;;;;;;;;;;;;;;;;;;;;;;;;;AAvBZC,MAAAA,U,OAAAA,U;;AACAC,MAAAA,S,iBAAAA,S;;AACFC,MAAAA,U;;AACEC,MAAAA,U,iBAAAA,U;AAAYC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OAEf;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;yBAkBTD,O,GAAN,MAAMA,OAAN;AAAA;AAAA,kCAAgC;AAAA;AAAA;AAAA,eACnCQ,MADmC,GACjB,KADiB;AAAA;;AAIpCC,QAAAA,IAAI,GAAG;AACV,eAAKC,QAAL,GAAgB,EAAhB;AACA;AAAA;AAAA,wCAAWC,WAAX,GAAyBC,UAAzB,CAAoC,KAApC,EAA2C,MAAM;AAC7C,iBAAKJ,MAAL,GAAc,IAAd;AACH,WAFD;AAGH;;AAEOK,QAAAA,WAAW,CAACC,OAAD,EAAkB;AACjC,cAAI,KAAKJ,QAAL,CAAcI,OAAd,CAAJ,EAA4B;AACxB;AACH;;AACD;AAAA;AAAA,wCAAWH,WAAX,GAAyBI,SAAzB,CAAmCD,OAAnC,EAA4C;AAAA;AAAA,oCAASE,IAArD,EAA2D,KAA3D,EAAmEC,IAAD,IAAqB;AACnF,gBAAIC,OAAO,GAAGD,IAAI,CAACA,IAAnB;AACA,iBAAKP,QAAL,CAAcI,OAAd,IAAyBI,OAAzB;AACH,WAHD,EAGIC,GAAD,IAAS;AACR;AAAA;AAAA,0CAAWC,KAAX,CAAiBD,GAAjB;AACH,WALD;AAMH;;AAEME,QAAAA,UAAU,CAACP,OAAD,EAAkB;AAC/B,cAAI,CAAC,KAAKN,MAAV,EAAkB;AACd;AAAA;AAAA,0CAAWc,IAAX,CAAgB,kBAAhB;AACH;;AACD,eAAKT,WAAL,CAAiBC,OAAjB;AACA,iBAAO,KAAKJ,QAAL,CAAcI,OAAd,CAAP;AACH;;AA7B0C,O","sourcesContent":["\r\nimport { _decorator, JsonAsset } from \"cc\";\r\nimport { Singleton } from \"../../common/Singleton\";\r\nimport LogManager from \"../../utils/LogManager\";\r\nimport { ResManager, LoadType } from \"../ResManager\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\nexport interface IOpenObjectData {\r\n    objectId: number,\r\n    name: string,\r\n    pos: string,\r\n    rot: string,\r\n    sca: string,\r\n    objectType: number,\r\n    shapeParam: any,\r\n    objectParam: any,\r\n}\r\n\r\nexport interface IOpenMapData {\r\n    mapId: number,\r\n    objectDatas: any,\r\n}\r\n\r\nexport default class MapData extends Singleton {\r\n    private inited: boolean = false;\r\n    private mapDatas: { [mapName: string]: IOpenMapData };\r\n\r\n    public init() {\r\n        this.mapDatas = {};\r\n        ResManager.getInstance().loadBundle(\"map\", () => {\r\n            this.inited = true;\r\n        });\r\n    }\r\n\r\n    private loadMapData(mapName: string) {\r\n        if (this.mapDatas[mapName]) {\r\n            return;\r\n        }\r\n        ResManager.getInstance().loadAsset(mapName, LoadType.JSON, \"map\", (json: JsonAsset) => {\r\n            let mapData = json.json as IOpenMapData;\r\n            this.mapDatas[mapName] = mapData;\r\n        }, (err) => {\r\n            LogManager.error(err);\r\n        })\r\n    }\r\n\r\n    public getMapData(mapName: string) {\r\n        if (!this.inited) {\r\n            LogManager.warn(\"MapManager未初始化完成\");\r\n        }\r\n        this.loadMapData(mapName);\r\n        return this.mapDatas[mapName];\r\n    }\r\n\r\n}"]}