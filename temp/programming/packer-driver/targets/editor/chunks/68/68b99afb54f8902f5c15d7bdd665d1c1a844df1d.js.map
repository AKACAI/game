{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/GameApp.ts"],"names":["_decorator","Component","GameManager","UIManager","InputManager","MapManager","ObjectFactory","GameTipManager","ResManager","EventManager","EventConstants","PanelName","ccclass","property","GameApp","isTest","gameLaunch","isOngoing","addEvent","GameControl","GameStart","onInitFinish","_resMgr","getInstance","_uiMgr","_inputMgr","_gameMgr","_objectFactory","_gameTipMgr","_mapMgr","setNextInitManager","undefined","init","start","openPanel","GameStartMenuView","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,U,iBAAAA,U;;AACFC,MAAAA,Y;;AACEC,MAAAA,c,kBAAAA,c;;AACAC,MAAAA,S,kBAAAA,S;;;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBb,U;;yBAGjBc,O,WADZF,OAAO,CAAC,SAAD,C,gBAAR,MACaE,OADb,SAC6Bb,SAD7B,CACuC;AAAA;AAAA;AAAA,eAWlBc,MAXkB,GAWA,KAXA;AAAA;;AAa5BC,QAAAA,UAAU,GAAS;AACtB,eAAKC,SAAL,GAAiB,KAAjB;AACA;AAAA;AAAA,4CAAaC,QAAb,CAAsB;AAAA;AAAA,gDAAeC,WAAf,CAA2BC,SAAjD,EAA4D,KAAKC,YAAjE,EAA+E,IAA/E;AAEA,eAAKC,OAAL,GAAe;AAAA;AAAA,wCAAWC,WAAX,EAAf;AACA,eAAKC,MAAL,GAAc;AAAA;AAAA,sCAAUD,WAAV,EAAd;AACA,eAAKE,SAAL,GAAiB;AAAA;AAAA,4CAAaF,WAAb,EAAjB;AACA,eAAKG,QAAL,GAAgB;AAAA;AAAA,0CAAYH,WAAZ,EAAhB;AACA,eAAKI,cAAL,GAAsB;AAAA;AAAA,8CAAcJ,WAAd,EAAtB;AACA,eAAKK,WAAL,GAAmB;AAAA;AAAA,gDAAeL,WAAf,EAAnB;AACA,eAAKM,OAAL,GAAe;AAAA;AAAA,wCAAWN,WAAX,EAAf;;AAEA,eAAKD,OAAL,CAAaQ,kBAAb,CAAgC,KAAKN,MAArC;;AACA,eAAKA,MAAL,CAAYM,kBAAZ,CAA+B,KAAKL,SAApC;;AACA,eAAKA,SAAL,CAAeK,kBAAf,CAAkC,KAAKJ,QAAvC;;AACA,eAAKA,QAAL,CAAcI,kBAAd,CAAiC,KAAKH,cAAtC;;AACA,eAAKA,cAAL,CAAoBG,kBAApB,CAAuC,KAAKF,WAA5C,EAhBsB,CAgBsC;;;AAC5D,eAAKA,WAAL,CAAiBE,kBAAjB,CAAoC,KAAKD,OAAzC,EAjBsB,CAiBsC;;;AAC5D,eAAKA,OAAL,CAAaC,kBAAb,CAAgCC,SAAhC;;AAEA,eAAKT,OAAL,CAAaU,IAAb;AACH;;AAEOX,QAAAA,YAAY,GAAG;AACnB,eAAKJ,SAAL,GAAiB,IAAjB;;AACA,cAAI,KAAKF,MAAT,EAAiB;AACb;AAAA;AAAA,4CAAYQ,WAAZ,GAA0BU,KAA1B;AACH,WAFD,MAEO;AACH,iBAAKT,MAAL,CAAYU,SAAZ,CAAsB;AAAA;AAAA,wCAAUC,iBAAhC;AACH,WANkB,CAOnB;;AACH;;AAEMC,QAAAA,MAAM,CAACC,SAAD,EAA0B;AACnC,cAAI,CAAC,KAAKpB,SAAV,EAAqB;AACjB;AACH;;AACD;AAAA;AAAA,0CAAYM,WAAZ,GAA0Ba,MAA1B,CAAiCC,SAAjC;AACH;;AAnDkC,O","sourcesContent":["import { _decorator, Component } from \"cc\";\nimport { GameManager, GameState } from \"./manager/game_manager/GameManager\";\nimport { UIManager } from \"./manager/ui_manager/UIManager\";\nimport { InputManager } from \"./manager/InputManager\";\nimport { MapManager } from \"./manager/map_manager/MapManager\";\nimport { ObjectFactory } from \"./modules/game/ObjectFactory\";\nimport { GameTipManager } from \"./modules/ui/game_tip/GameTipManager\";\nimport { ResManager } from \"./manager/ResManager\";\nimport EventManager from \"./manager/event_manager/EventManager\";\nimport { EventConstants } from \"./manager/event_manager/EventConstants\";\nimport { PanelName } from \"./manager/ui_manager/Name2Panel\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('GameApp')\nexport class GameApp extends Component {\n    private isOngoing: boolean;\n\n    private _resMgr: ResManager;\n    private _inputMgr: InputManager;\n    private _uiMgr: UIManager;\n    private _objectFactory: ObjectFactory;\n    private _gameTipMgr: GameTipManager;\n    private _mapMgr: MapManager;\n    private _gameMgr: GameManager;\n\n    private readonly isTest: boolean = false;\n\n    public gameLaunch(): void {\n        this.isOngoing = false;\n        EventManager.addEvent(EventConstants.GameControl.GameStart, this.onInitFinish, this);\n\n        this._resMgr = ResManager.getInstance();\n        this._uiMgr = UIManager.getInstance();\n        this._inputMgr = InputManager.getInstance();\n        this._gameMgr = GameManager.getInstance();\n        this._objectFactory = ObjectFactory.getInstance();\n        this._gameTipMgr = GameTipManager.getInstance();\n        this._mapMgr = MapManager.getInstance();\n\n        this._resMgr.setNextInitManager(this._uiMgr);\n        this._uiMgr.setNextInitManager(this._inputMgr);\n        this._inputMgr.setNextInitManager(this._gameMgr);\n        this._gameMgr.setNextInitManager(this._objectFactory);\n        this._objectFactory.setNextInitManager(this._gameTipMgr);   // 这些可以在gameManager之后\n        this._gameTipMgr.setNextInitManager(this._mapMgr);          // 这些可以在gameManager之后\n        this._mapMgr.setNextInitManager(undefined);\n\n        this._resMgr.init();\n    }\n\n    private onInitFinish() {\n        this.isOngoing = true;\n        if (this.isTest) {\n            GameManager.getInstance().start();\n        } else {\n            this._uiMgr.openPanel(PanelName.GameStartMenuView);\n        }\n        //this._gameMgr.start();\n    }\n\n    public update(deltaTime: number): void {\n        if (!this.isOngoing) {\n            return;\n        }\n        GameManager.getInstance().update(deltaTime);\n    }l\n}\n\n\n"]}