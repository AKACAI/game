{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/common/Display.ts"],"names":["Display","builtinResMgr","Button","Color","EventTouch","Font","input","instantiate","isValid","js","Label","LabelOutlineComponent","Layout","log","Mask","Material","MeshRenderer","Node","ParticleSystem2D","Rect","ResolutionPolicy","resources","size","Size","Sprite","SpriteFrame","sys","Tween","tween","UIMeshRenderer","UIOpacity","UIRenderer","UITransform","v2","v3","view","Touch","Input","TimerManager","TextureManager","Utils","SdkManager","PathDefine","AutoPrefabI18nMgr","WindowManager","language","LoadAndSetImageComponent","GroupLayer","CusMaterial","MoveOutInScreenComponent","DEBUG","ComponentHelper","FashionData","FashionPartData","FashionManager","LayerHelper","LogManager","ComButton","BundleName","init","getVisibleSize","width","height","center","sizeInPixels","getVisibleSizeInPixel","frameSzie","cx","cy","w_scale","h_scale","validRect","design_width","validScreenRect","visibleToScreenY","x","y","visualScreenRect","getScreenRect","console","screenToVisible","screenToVisibleX","screenToVisibleY","visibleToScreenX","alignRight","node","isHalfFit","fit_x","fit_y","isShowAll","alignTop","offset","isNormalWindow","curResolutionPolicy","FIXED_WIDTH","eZone","getBottomOffset","getUIZoneHeight","r_scal","design_height","setPosition","getPosition","Math","ceil","getHeightOffset","alignTopLH","offSetData","ratio","deviceManufacturer","getInstance","getDeviceManufacturer","androidSysVer","getAndroidSysVer","os","OS","ANDROID","hasNotchInScreen","safeAreaHeight","getNotchHeight","hasNotchAtOPPO","IOS","getBottomNotchOffset","alignRightTop","right","top","ret_x","ret_y","alignRightTopLH","alignWidthMiddle","FIXED_HEIGHT","alignLeft","alignLeftTopLH","SHOW_ALL","alignHeightMiddle","alignBottom","ignoreChatBar","hasOffsetChatBarHeight","chatBarMinHeight","iphonex_bottom_height","getBottomChatHeight","bottomChatHeight","undefined","minHeight","maxHeight","chatBarMaxHeight","disY","min","max","alignLeftBottom","alignRightBottom","alignMiddle","getMaxScal","frameSize","ratio_width","ratio_height","scale","Number","getSubChatBarMaxScal","getWidthScal","getWidthheightRatio","setLayer","layer","children","length","iterator","setPosX","posX","position","z","setPosY","posY","setPosZ","posZ","setScaleX","scaleX","setScale","setScaleY","scaleY","setScaleZ","scaleZ","setAnchorPoint","getComponent","setAnchorPointX","anchorY","setAnchorPointY","anchorX","setContentSize","getContentSize","contentSize","setContentWidth","setContentHeight","setOpacity","opacity","comp","addComponent","newNode","name","newLabel","fontSize","param","label","useFnt","font","getDefaultBMPFont","spacingX","getTTFont","horizontalAlign","HorizontalAlign","CENTER","verticalAlign","VerticalAlign","lineHeight","newLayout","newDigitNode","path","node_label","getFontByUrl","setDigitNodeProperty","string","load","err","newSprite","sprite","newMask","new3dSprite","type","Type","SLICED","SCENE3D","curMater","getMaterial","destroy","getMaterialByUrl","SPRITE","setMaterial","timerMoveAction","widget","endPoint","token","speed","callback","callbackData","removeTimer","removeTimerWithToken","sender","beginPoint","calcLinear","calcLinearVelocity","moveTimeEndPoint","moveTimeSpeed","movePos","compareDistance","moveTimeToken","moveTimeCallBack","moveTimeCallbackData","addFrame","newButton","setButtonTexture","normal","pressed","btn","frame","getSpriteFrameFromCache","normalSprite","pressedSprite","filterGrey","isGrey","btnComp","disabledSprite","clickComp","spComp","grayscale","labelComp","mat","get","customMaterial","i","child","setLabelString","text","debugLog","s","str","setLabelColor","color","setLabelOutline","setLabelFontSize","setButtonString","getComponentInChildren","setSpriteFrame","spriteFrame","warn","loadAndSetImage","obj","tCallback","targetObj","isAutoReleaseImage","lev","bundleName","Resources","setResPath","unloadImage","unLoadRes","setClickEventByType","click_widget","click_func","target","extParams","f","event","call","newComButton","clickFunc","removeComAllClickFunc","combutton","removeAllClickFunc","removeComAllClickFuncAndComButton","setAssetImg","img","base_id","formatStr","playEllipseAction","pos","radiusA","radiusB","isCounterclockwise","angle","isCheckZ","loops","cbData","time","baseAngle","count","addTimer","execute","cos","angle2radian","sin","PI","newImage","img_path","nodeNmae","imgNode","cachedFrame","error","newParticle","particlePath","particle","particleNode","particleComp","playOnLoad","partileFile","getParticleByUrl","file","newColorLayer","instantiatePrefab","prefabPath","prefabAsset","getPrefabByUrl","prefabNode","transLabel","colorGrey","rate","WHITE","getNoBorderScaleValue","nodeWidth","nodeHeight","gameWidth","gameHeight","sx","sy","maxScale","createLoadingAction","objList","interval","index","showObjList","v","active","parseInt","getFullFrameScale","setSpriteFrameRect","botton","left","insetTop","insetBottom","insetLeft","insetRight","setButtonTextColor","getChildByName","playRotateActionUp","fAngle","tAngle","to","start","playRotateActionDown","runAfterRender","cbFunc","apply","setButtonIsCanClick","isCanClick","resumeSystemEvents","pauseSystemEvents","scaleForeverAnim","bigS","smallS","stopAllByTarget","toScale1","toScale2","repeatForever","clone","isIphoneX","loadItemIconImg","iconPath","finishCallBack","plistPath","getItemIconPlistPath","sprFrame","spriteComp","loadPlist","resPath","littleGameScale","numX","numY","isHasScaleRes","sdkRightTopMove","closeBtn","isSmallGame","MOVE_LEFT","getHeightAdaptionScale","showAssets","num","floor","numlv","wan","numToWanString","numberAbbreviation","abbreviation","yi","numberShort","doShake","set","union","repeat","showNum","thousand","kilobit","hundred","hundreds_millions","millions_millions","million","closeOpeningWinDow","winName","win","getWinByName","closeBySelf","setBgMaxSize","moveOutHidWithNode","params","moisCom","moveOut","moveInShowWithNode","originalX","noDelay","moveIn","getfntSize","getValidRect","setModelFashion","model","fashionSetsId","itemSuit","getFashionSetsById","sets","tempArr","str2arr","modelFashionList","element","fId","itemPart","getFashionItem","fpd","id","push","makeup_sets","faceCfg","getCosmeticsSetsDataById","setsStr","setsArr","key_setsArr","element_setsArr","setData","ary_looks","setModelFashionWithMyFace","fashion_id","faceData","getdefaulFaceData","faceKey","faceOne","filterSpecialChar","inputString","pattern","RegExp","subString","replace","tmpString","isTheSame","rep","writeFileToLocal","data","filePath","port","successCb","failCb","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","response","responseText","JSON","parse","onerror","tmpData","fileData","stringify","send","createAndSetMaterial","res","material","passIndex","pass","initialize","effectName","defines","USE_ALBEDO_MAP","setProperty","shakeScreen","sType","isDef","pow","endCallback","d","tx","ty","tz","arr","ts","dis","x1","y1","x2","y2","x3","y3","rect","toFixed","addUIMeshComponent","_layer","UI_2D","childs","getComponentsInChildren","updateSuitableUISize","designSize","getDesignResolutionSize","visibleSize","realHeight","realWidth","suitableUISize","suitableWidthScale","suitableHeightScale","fullNode","mode","real","suitableSize","updateScale","uiTrans","_uiProps","uiTransformComp","nodeSize","realScale","nodeScale","setNodeVisible","isVisible","setNodeColor","autoClick","worldPos","posA","activeDispatchEventTouch","EventType","TOUCH_START","setTimeout","TOUCH_END","fakeClick","changedTouches","endEvent","touch","startEvent","emit","MOVE_DOWN"],"mappings":"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","sourcesContent":["import TimerManager from \"TimerManager\";\nimport CallbackData from \"CallbackData\";\nimport TextureManager from \"TextureManager\";\nimport Utils from \"Utils\";\nimport SdkManager from \"SdkManager\";\nimport PathDefine from \"PathDefine\";\nimport AutoPrefabI18nMgr from \"AutoPrefabI18nMgr\";\nimport WindowManager from \"WindowManager\";\nimport language from \"lang\";\nimport LoadAndSetImageComponent from \"LoadAndSetImageComponent\";\nimport { builtinResMgr, Button, Color, Component, EventTouch, Font, Graphics, input, instantiate, isValid, js, Label, LabelOutlineComponent, Layout, log, Mask, Material, MeshRenderer, Node, ParticleSystem, ParticleSystem2D, Rect, ResolutionPolicy, resources, size, Size, Sprite, SpriteFrame, sys, Texture2D, Tween, tween, UIMeshRenderer, UIOpacity, UIRenderer, UITransform, v2, v3, Vec2, Vec3, View, view, Touch, __private, Input } from \"cc\";\nimport { GroupLayer, CusMaterial, GlobalHelper } from \"GlobalHelper\";\nimport SetClickComponent from \"SetClickComponent\";\nimport MoveOutInScreenComponent from \"MoveOutInScreenComponent\";\nimport { DEBUG } from \"cc/env\";\nimport { ComponentHelper, INewComButtonPExt } from \"ComponentHelper\";\nimport RoleObjectAnimation from \"RoleObjectAnimation\";\nimport FashionData from \"FashionData\";\nimport { FashionPartData } from \"FashionInfo\";\nimport FashionManager from \"FashionManager\";\nimport ItemData from \"ItemData\";\nimport { LayerHelper } from \"LayerHelper\";\nimport LogManager from \"LogManager\";\nimport { ComButton } from \"ComButton\";\nimport { BundleName } from \"ResManager\";\n\n// declare function require(path: string): any;\n\n// 客户端布局等管理\nexport default class Display {\n\n    static readonly design_width = 1024\n    static readonly design_height = 1821\n\n    //Display.width 记录的是设计分辨率宽\n    static width: number = 0;       // view.getVisibleSizeInPixel().width;\n    //Display.height 记录的是设计分辨率高\n    static height: number = 0;       // view.getVisibleSizeInPixel().height;\n    //cx = Display.width/2\n    static cx: number = 0;       // view.getVisibleSizeInPixel().width/2;\n    //cy = Display.height/2\n    static cy: number = 0;       // view.getVisibleSizeInPixel().height/2;\n    ///Display.size 记录的是设计分辨率宽高\n    static size: Size = null!;    // size(director.getWinSize().width, director.getWinSize().height);\n    static sizeInPixels: Size = null!;    // size(director.getWinSize().width, director.getWinSize().height);\n    static contentScaleFactor: any;\n    static center: Vec3;\n    static frameSzie: Size;\n\n    static curResolutionPolicy: number = 0;\n\n    static readonly MOVE_LEFT: Vec3 = v3(-250, 0, 0);\n    static readonly MOVE_DOWN: Vec3 = v3(0, -90, 0);\n\n\n    static iphonex_bottom_height: number = 30;\n\n    /**聊天栏最小高度 */\n    static chatBarMinHeight = 137;\n    // static chatBarMinHeight = 80;\n    /**聊天栏最大高度 */\n    static chatBarMaxHeight = 223;\n    // static chatBarMaxHeight = 80;\n    /**\n     * 底部聊天栏高度\n     * 不要直接使用该值！！！\n     */\n    private static bottomChatHeight;\n    static w_scale: number = 0;\n    static h_scale: number = 0;\n\n    static validRect: Rect;\n    static validScreenRect: Rect;\n\n    /**实际的显示区域 */\n    static visualScreenRect: Rect;\n\n    // todo:这里测试一下，应该要换成用getWinSize代替getVisibleSizeInPixel\n    static init() {\n\n\n        // Display.size = director.getWinSize();\n        Display.size = view.getVisibleSize();\n        Display.width = Display.size.width;\n        Display.height = Display.size.height;\n        Display.center = v3(Display.width / 2, Display.height / 2, 0);\n\n        // Display.sizeInPixels 记录的是设备实际的分辨率\n        Display.sizeInPixels = view.getVisibleSizeInPixel()\n        Display.frameSzie = view.getVisibleSizeInPixel()\n        Display.cx = Display.width / 2;\n        Display.cy = Display.height / 2;\n\n        Display.w_scale = Display.width / Display.frameSzie.width;\n        Display.h_scale = Display.height / Display.frameSzie.height;\n        Display.validRect = new Rect((Display.width - Display.design_width) / 2, 0, Display.design_width, Display.height);\n        Display.validScreenRect = new Rect(Display.visibleToScreenY(Display.validRect.x), 0, Display.visibleToScreenY(Display.design_width), Display.sizeInPixels.y);\n\n        Display.visualScreenRect = Display.getScreenRect()\n        console.log(\"========Display.init()\", Display.width, Display.height, Display.w_scale, Display.validScreenRect, Display.sizeInPixels);\n    }\n\n    static screenToVisible(x: number, y: number): Vec3 {\n        return v3(x * Display.w_scale, y * Display.h_scale);\n    }\n\n    static screenToVisibleX(x: number): number {\n        return x * Display.w_scale;\n    }\n\n    static screenToVisibleY(y: number): number {\n        return y * Display.h_scale;\n    }\n\n    static visibleToScreenX(x: number): number {\n        return x / Display.w_scale;\n    }\n\n    static visibleToScreenY(y: number): number {\n        return y / Display.h_scale;\n    }\n\n    // 对齐屏幕右变，不考虑Y值\n    static alignRight(node?: Node, isHalfFit?: boolean) {\n\n        let fit_x = 0\n        let fit_y = 0\n\n        // ipx等不需要调整\n        if (Display.isShowAll()) {\n            return { fit_x, fit_y }\n        }\n\n\n        return { fit_x, fit_y }\n    }\n\n    // 对齐屏幕顶部，不考虑X值\n    static alignTop(node?: Node, offset?: number, isHalfFit?: boolean, isNormalWindow?: boolean) {\n\n        offset = offset || 0;\n\n\n        let fit_x = 0\n        let fit_y = 0\n\n        // ipx等不需要调整\n        if (Display.isShowAll()) {\n            return { fit_x, fit_y };\n        }\n        else if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n            if (isNormalWindow) {\n                //求出当前ui区\n                let eZone = Display.height - Display.getBottomOffset();\n                //设置背景缩放比例：当前ui区与设计ui区的比例，填满ui内容区\n                fit_y = (eZone - Display.getUIZoneHeight()) / 2;\n            } else {\n                let r_scal = Display.sizeInPixels.width / Display.design_width\n                fit_y = Display.sizeInPixels.height / r_scal - Display.design_height;\n                if (isHalfFit) {\n                    fit_y = fit_y / 2;\n                }\n            }\n\n        }\n\n        if (node) {\n            node.setPosition(node.getPosition().x, Math.ceil((node.getPosition().y + fit_y) + offset));\n        }\n\n        return { fit_x, fit_y }\n\n    }\n\n    /**到顶部的偏移 */\n    static getHeightOffset(isHalfFit?: boolean) {\n        // ipx等不需要调整\n        let fit_y: number = 0;\n        if (Display.isShowAll()) {\n            // return { fit_x, fit_y }\n            return 0;\n        }\n        else if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n            let r_scal = Display.sizeInPixels.width / Display.design_width\n            let fit_y = Display.sizeInPixels.height / r_scal - Display.design_height\n            if (isHalfFit) {\n                fit_y = fit_y / 2\n            }\n            return fit_y;\n        }\n        return fit_y;\n    }\n\n\n    /**\n     * 顶部对齐（添加浏海屏偏移）\n     * @param node 节点\n     * @param isHalfFit 中心点是否在屏幕中间\n     * @param isNormalWindow normal窗口主要是要计算底部的聊天区域\n     */\n    static alignTopLH(node?: Node, isHalfFit?: boolean, isNormalWindow?: boolean) {\n        let offset = Display.offSetData();\n        return Display.alignTop(node, offset, isHalfFit, isNormalWindow);\n    }\n\n    /**\n     * 是否需要刘海屏偏移\n     */\n\n    static offSetData() {\n        let ratio = Display.sizeInPixels.height / Display.sizeInPixels.width;\n        let deviceManufacturer = SdkManager.getInstance().getDeviceManufacturer();\n        let androidSysVer = SdkManager.getInstance().getAndroidSysVer();\n        let offset = -60; //向下偏移60\n\n        if (sys.os == sys.OS.ANDROID) {\n            if (androidSysVer > 27) {\n                if (SdkManager.getInstance().hasNotchInScreen()) {\n\n                    // 部分手机，类似华为p40，打孔面积比较大，超过了60像素，需要获取安全区域高度做处理\n                    let safeAreaHeight = SdkManager.getInstance().getNotchHeight();\n                    let r_scal = 1\n                    if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n                        r_scal = view.getVisibleSizeInPixel().width / Display.design_width\n                    }\n                    safeAreaHeight = -safeAreaHeight / r_scal;\n                    if (safeAreaHeight < offset) {\n                        offset = safeAreaHeight;\n                    }\n                    return offset\n                }\n            } else {\n                if ((deviceManufacturer == \"oppo\" || deviceManufacturer == \"OPPO\") && SdkManager.getInstance().hasNotchAtOPPO()) {\n                    return offset\n                }\n            }\n        } else if (sys.os == sys.OS.IOS) {\n            if (ratio > 2) {\n                offset = offset - Display.getBottomNotchOffset() + 3;//+3像素是为了更贴边\n                return offset\n            }\n        }\n\n        /**需要本地模拟刘海屏高度，直接改这里 */\n        // return -45;\n        return 0\n    }\n\n\n    // 对齐屏幕右上\n    static alignRightTop(node: Node) {\n        let right = Display.alignRight(node);\n        let top = Display.alignTop(node);\n\n        let ret_x = right.fit_x;\n        let ret_y = right.fit_y;\n\n        if (top.fit_x > ret_x) {\n            ret_x = top.fit_x;\n        }\n\n        if (top.fit_y > ret_y) {\n            ret_y = top.fit_y;\n        }\n\n        return { ret_x, ret_y };\n    }\n\n    static alignRightTopLH(node: Node, isHalfFit?: boolean) {\n        let right = Display.alignRight(node, isHalfFit);\n        let top = Display.alignTopLH(node, isHalfFit);\n\n        let ret_x = right.fit_x;\n        let ret_y = right.fit_y;\n\n        if (top.fit_x > ret_x) {\n            ret_x = top.fit_x;\n        }\n\n        if (top.fit_y > ret_y) {\n            ret_y = top.fit_y;\n        }\n\n        return { ret_x, ret_y }\n    }\n\n    // x轴居中\n    static alignWidthMiddle(node?: Node) {\n\n        // let design_width = Display.width\n        // let design_height = Display.height\n\n        //实际分辨率\n        // let frameSize = view.getVisibleSizeInPixel()\n\n        let fit_x = 0\n        let fit_y = 0\n\n        // ipx等不需要调整\n        if (Display.isShowAll()) {\n            return { fit_x, fit_y }\n        }\n\n        let r_scal = 1\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_HEIGHT) {\n            let r_scal = Display.sizeInPixels.height / Display.design_height\n            fit_x = (Display.sizeInPixels.width / r_scal - Display.design_width) / 2\n        }\n\n        if (node) {\n            node.setPosition(node.getPosition().x + fit_x, node.getPosition().y);\n        }\n\n        return { fit_x, fit_y }\n    }\n\n\n    static alignLeft(node?: Node): any {\n\n        //实际分辨率\n        // let frameSize = view.getVisibleSizeInPixel()\n        let fit_x = 0\n        let fit_y = 0\n        if (Display.isShowAll()) {\n            return fit_x\n        }\n\n        let r_scal = 1\n        // if (Canvas.instance.fitHeight) {\n        //     r_scal = Display.sizeInPixels.height / Display.design_height\n        //     fit_x = -(Display.sizeInPixels.width / r_scal - Display.design_width) / 2\n        // }\n\n        // if (node) {\n        //     node.x = (node.x + fit_x)\n        // }\n\n        return fit_x\n    }\n\n    /**左上角 */\n    /**\n     * 左上角\n     * @param node  node\n     * @param isHalfFit 锚点在屏幕中间\n     */\n    static alignLeftTopLH(node: Node, isHalfFit?: boolean) {\n        Display.alignLeft(node);\n        Display.alignTopLH(node, isHalfFit);\n    }\n\n    static isShowAll() {\n        return Display.curResolutionPolicy == ResolutionPolicy.SHOW_ALL;\n    }\n\n\n    // y轴居中\n    static alignHeightMiddle(node?: Node) {\n\n        //实际分辨率\n        // let frameSize = view.getVisibleSizeInPixel()\n\n        let fit_x = 0\n        let fit_y = 0\n\n        // ipx等不需要调整\n        if (Display.isShowAll()) {\n            return { fit_x, fit_y }\n        }\n\n        // let r_scal = 1\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n            let r_scal = Display.sizeInPixels.width / Display.design_width\n            fit_y = (Display.sizeInPixels.height / r_scal - Display.design_height) / 2\n        }\n\n        if (node) {\n            node.setPosition(node.getPosition().x, node.getPosition().y + fit_y);\n        }\n\n\n        return { fit_x, fit_y }\n    }\n\n\n    /**\n     * 底部对齐\n     * @param node 节点\n     * @param ignoreChatBar 忽略聊天栏节点\n     * @param hasOffsetChatBarHeight 已经手动移了聊天栏高度\n     * @param isNormalWindow 在窗口里面的内容，无视ignoreChatBar，hasOffsetChatBarHeight，是根据normal窗口，窗口已经偏移过了\n     */\n    static alignBottom(node?: Node, ignoreChatBar?: boolean, hasOffsetChatBarHeight?: boolean, isNormalWindow?: boolean): any {\n        //实际分辨率\n        // let fit_x = 0\n        let fit_y = 0\n        // ipx等不需要调整\n        // if (Display.isShowAll()) {\n        //     return fit_y;\n        // }\n        // let r_scal = 1\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n            if (isNormalWindow) {\n                //求出当前ui区\n                let eZone = Display.height - Display.getBottomOffset();\n                //设置背景缩放比例：当前ui区与设计ui区的比例，填满ui内容区\n                fit_y = -(eZone - Display.getUIZoneHeight()) / 2;\n                if (node) {\n                    node.setPosition(node.getPosition().x, node.getPosition().y + fit_y);\n                }\n                return fit_y;\n            }\n\n            let r_scal = Display.sizeInPixels.width / Display.design_width;\n            fit_y = -(Display.sizeInPixels.height / r_scal - Display.design_height) / 2;\n\n        }\n\n        if (node) {\n            if (ignoreChatBar) {\n                // node.y = (node.y + fit_y) + Display.getBottomNotchOffset();\n                fit_y += Display.getBottomNotchOffset();\n            } else {\n                // node.y = (node.y + fit_y) + Display.getBottomNotchOffset() + Display.getBottomChatHeight();\n                fit_y += Display.getBottomOffset();\n                //最后减去聊天栏最小高度的原因是prefab里面已经手动移了位置\n                if (hasOffsetChatBarHeight) {\n                    fit_y -= Display.chatBarMinHeight;\n                }\n            }\n\n            node.setPosition(node.getPosition().x, node.getPosition().y + fit_y);\n        }\n\n        return fit_y;\n    }\n\n\n    //iphoneX底部\n    static getBottomNotchOffset() {\n        let offset = 0;\n        if (sys.os == sys.OS.IOS) {\n            let ratio = Display.sizeInPixels.height / Display.sizeInPixels.width;\n            offset = ratio > 2 ? Display.iphonex_bottom_height : offset;\n        }\n        return offset;\n    }\n\n\n\n    //底部聊天栏高度\n    static getBottomChatHeight() {\n        if (Display.bottomChatHeight === undefined) {\n            let minHeight = Display.chatBarMinHeight;//最小高度\n            let maxHeight = Display.chatBarMaxHeight;//最大高度\n            let disY = 0;\n            if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n                let r_scal = Display.sizeInPixels.width / Display.design_width;\n                disY = Display.sizeInPixels.height / r_scal - Display.design_height;\n            }\n            //最小按设计分辨率高，最大不超过指定高度\n            let height = Math.min(Math.max(disY, minHeight), maxHeight);\n            Display.bottomChatHeight = height;\n        }\n\n        return Display.bottomChatHeight;\n\n    }\n\n    /**\n     * 底部偏移\n     * 包括聊天区和iphone底部偏移\n     *  */\n    static getBottomOffset() {\n        return Display.getBottomNotchOffset() + Display.getBottomChatHeight();\n    }\n\n    /**\n     * UI内容区设计分辨率\n     */\n    static getUIZoneHeight() {\n        return Display.design_height - Display.chatBarMinHeight;\n    }\n\n    /**左下角对齐 */\n    static alignLeftBottom(node?: Node, ignoreChatBar?: boolean, hasOffsetChatBarHeight?: boolean): any {\n        Display.alignLeft(node);\n        Display.alignBottom(node, ignoreChatBar, hasOffsetChatBarHeight);\n    }\n\n    /**右下角对齐 */\n    static alignRightBottom(node: Node, isHalfFit?: boolean, ignoreChatBar?: boolean, hasOffsetChatBarHeight?: boolean): any {\n        Display.alignRight(node, isHalfFit);\n        Display.alignBottom(node, ignoreChatBar, hasOffsetChatBarHeight);\n    }\n\n\n    // x,y轴都居中\n    static alignMiddle(node: Node): any {\n        let width = Display.alignWidthMiddle(node);\n        let height = Display.alignHeightMiddle(node);\n\n        let ret_x = width.fit_x;\n        let ret_y = width.fit_y;\n\n        if (height.fit_x > ret_x) {\n            ret_x = height.fit_x;\n        }\n\n        if (height.fit_y > ret_y) {\n            ret_y = height.fit_y;\n        }\n\n        return { ret_x, ret_y }\n    }\n\n    // 获取最大缩放比例\n    static getMaxScal(): Vec3 {\n        if (Display.isShowAll()) {\n            return v3(1, 1, 1);\n        }\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n            let frameSize = Display.sizeInPixels\n            let ratio_width = frameSize.width / Display.design_width\n            let ratio_height = frameSize.height / Display.design_height\n            let scale = 1\n            if (ratio_width > ratio_height) {\n                scale = Number(1 / ratio_height * ratio_width)\n            } else {\n                scale = Number(1 / ratio_width * ratio_height)\n            }\n            return v3(scale, scale, scale);\n        }\n        return v3(1, 1, 1);\n    }\n\n    // 获取减去聊天栏后的最大缩放比例\n    static getSubChatBarMaxScal(): number {\n        if (Display.isShowAll()) {\n            return 1\n        }\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n            let frameSize = Display.sizeInPixels\n            let ratio_width = frameSize.width / Display.design_width\n            let ratio_height = frameSize.height / Display.design_height\n\n            if (ratio_width > ratio_height) {\n                return Number(1 / ratio_height * ratio_width)\n            } else {\n                return Number(1 / ratio_width * ratio_height)\n            }\n        }\n        return 1;\n    }\n\n    static getWidthScal(): number {\n        let r_scal = 1\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_HEIGHT) {\n            r_scal = Display.sizeInPixels.height / Display.design_height\n            // fit_x = -(Display.sizeInPixels.width / r_scal - Display.design_width) / 2\n        }\n\n\n        return r_scal\n    }\n\n\n    static getWidthheightRatio() {\n        let frameSize = Display.sizeInPixels\n        let ratio_width = frameSize.width / Display.design_width\n        let ratio_height = frameSize.height / Display.design_height\n        if (ratio_width > ratio_height) {\n            return true\n        } else {\n            return false\n        }\n    }\n\n    static setLayer(node: Node, layer: number) {\n        if (node.children.length > 0) {\n            for (const iterator of node.children) {\n                Display.setLayer(iterator, layer);\n            }\n        }\n        node.layer = layer;\n    }\n\n    static setPosX(node: Node, posX: number) {\n        node.setPosition(posX, node.position.y, node.position.z);\n    }\n\n    static setPosY(node: Node, posY: number) {\n        node.setPosition(node.position.x, posY, node.position.z);\n    }\n\n    static setPosZ(node: Node, posZ: number) {\n        node.setPosition(node.position.x, node.position.y, posZ);\n    }\n\n    static setScaleX(node: Node, scaleX: number) {\n        node.setScale(scaleX, node.scale.y, node.scale.z);\n    }\n\n    static setScaleY(node: Node, scaleY: number) {\n        node.setScale(node.scale.x, scaleY, node.scale.z);\n    }\n\n    static setScaleZ(node: Node, scaleZ: number) {\n        node.setScale(node.scale.x, node.scale.y, scaleZ);\n    }\n\n    static setAnchorPoint(node: Node, x: number, y: number) {\n        node.getComponent(UITransform) && node.getComponent(UITransform).setAnchorPoint(x, y);\n    }\n\n    static setAnchorPointX(node: Node, x: number) {\n        node.getComponent(UITransform) && node.getComponent(UITransform).setAnchorPoint(x, node.getComponent(UITransform).anchorY);\n    }\n\n    static setAnchorPointY(node: Node, y: number) {\n        node.getComponent(UITransform) && node.getComponent(UITransform).setAnchorPoint(node.getComponent(UITransform).anchorX, y);\n    }\n\n    static setContentSize(node: Node, width: number, height: number) {\n        node.getComponent(UITransform) && node.getComponent(UITransform).setContentSize(width, height);\n    }\n\n    /**获取对应节点的uiTransform的size 如果没有，返回一个全新的size 0 ,0 */\n    static getContentSize(node: Node): Size {\n        if (node.getComponent(UITransform)) {\n            return node.getComponent(UITransform).contentSize;\n        } else {\n            return new Size(0, 0);\n        }\n\n    }\n\n    static setContentWidth(node: Node, width: number) {\n        node.getComponent(UITransform) && node.getComponent(UITransform).setContentSize(width, node.getComponent(UITransform).height);\n    }\n\n    static setContentHeight(node: Node, height: number) {\n        node.getComponent(UITransform) && node.getComponent(UITransform).setContentSize(node.getComponent(UITransform).width, height);\n    }\n\n    static setOpacity(node: Node, opacity: number) {\n        let comp = node.getComponent(UIOpacity)\n        if (!comp) {\n            comp = node.addComponent(UIOpacity)\n        }\n        comp.opacity = opacity;\n    }\n\n\n    // 创建新节点\n    static newNode(name?: string): Node {\n        let node = new Node(name);\n        node.addComponent(UITransform);\n        node.addComponent(UIOpacity);\n        return node;\n    }\n\n\n    /**\n     * 新建label\n     * @param fontSize 字号大小\n     * @param param  {verticalAlign:是否坚向 useFnt:是否fnt字体}\n     */\n    static newLabel(fontSize?: number, param?: any): Node {\n\n        let node = new Node();\n        // node.addComponent(UITransform);\n        node.addComponent(UIOpacity);\n        param = param || {}\n        let label = node.addComponent(Label);\n        if (param.useFnt) {\n            label.font = TextureManager.getDefaultBMPFont();\n            label.spacingX = 5;\n        } else {\n            label.font = TextureManager.getTTFont();\n        }\n        // 水平+垂直方向上都居中，如果需要其它方式。请创建对象后自行修改，不要改动默认的位置\n        label.horizontalAlign = Label.HorizontalAlign.CENTER\n        if (param && param.verticalAlign) {\n            label.verticalAlign = param.verticalAlign;\n        } else {\n            label.verticalAlign = Label.VerticalAlign.CENTER\n        }\n        if (fontSize) {\n            if (param.useFnt) {\n                label.lineHeight = fontSize + 6; //此处的作用是防止文字被切平\n            } else {\n                label.fontSize = fontSize\n                label.lineHeight = fontSize + 4; //此处的作用是防止文字被切平\n            }\n\n        }\n        return node;\n    }\n\n    // 创建新Layout\n    static newLayout(): Layout {\n        return new Layout();\n    }\n\n    /**\n     * 创建艺术字字体组件\n     * \n     * @param path 文件名 艺术字文件存放在ui/digit/下\n     * */\n    static newDigitNode(path: string, fontSize?: number): Node {\n        let node = new Node();\n        // node.addComponent(UITransform);\n        let node_label = node.addComponent(Label);\n        let font = TextureManager.getFontByUrl(\"ui/digit/\" + path);\n        node_label.font = font;\n        if (fontSize) {\n            node_label.fontSize = fontSize\n        }\n        return node\n    }\n\n    /**\n     * 替换艺术字字体\n     * @param path  艺术字字体名字\n     * @param string   显示的文本\n     */\n    static setDigitNodeProperty(node: Node, path: string, string?: string) {\n        let node_label = node.getComponent(Label);\n        // loader.loadRes(\"ui/digit/\" + path, function (err, Font) {\n\n        resources.load(\"ui/digit/\" + path, Font, function (err, font: Font) {\n            if (!node_label || !node_label.isValid || !node_label.node || !node_label.node.isValid) return;\n\n            node_label.font = font;\n            node_label.string = string || \"\";\n        });\n    }\n\n\n\n    // 创建新的带有Sprite组件的节点\n    static newSprite(name?: string): Node {\n        let node: Node = new Node(name);\n        // node.addComponent(UITransform);\n        node.addComponent(UIOpacity);\n        let sprite = node.addComponent(Sprite);\n        // sprite.spriteFrame = new SpriteFrame();\n        return node;\n    }\n\n    /**\n     * 创建新的遮罩节点\n     * @param name  名字\n     */\n    static newMask(name?: string): Node {\n        let node: Node = new Node(name);\n\n        node.addComponent(Mask);\n\n        return node;\n\n    }\n\n    static new3dSprite(name?: string): Node {\n        let node: Node = new Node(name);\n        let sprite = node.addComponent(Sprite);\n        // node.addComponent(UITransform);\n        node.addComponent(UIOpacity);\n        sprite.type = Sprite.Type.SLICED;\n        node.layer = GroupLayer.SCENE3D;\n        let curMater = sprite.getMaterial(0);\n        if (curMater)\n            curMater.destroy();\n        curMater = TextureManager.getMaterialByUrl(CusMaterial.SPRITE);\n        sprite.setMaterial(curMater, 0);\n        return node;\n    }\n\n    static timerMoveAction(widget: any, endPoint: Vec2, token: string, speed: number, callback: Function, callbackData: any) {\n        if (widget[\"moveTimeUpdate\"]) {\n            TimerManager.removeTimer(widget[\"moveTimeUpdate\"])\n        }\n        if (widget[\"token\"]) {\n            TimerManager.removeTimerWithToken(widget[\"token\"])\n        }\n\n        speed = speed || 20\n        widget[\"moveTimeToken\"] = token\n        widget[\"moveTimeSpeed\"] = speed\n        widget[\"moveTimeEndPoint\"] = endPoint\n        widget[\"moveTimeCallBack\"] = callback\n        widget[\"moveTimeCallbackData\"] = callbackData\n\n        widget[\"moveTimeUpdate\"] = function (sender: any) {\n            let beginPoint = v2(sender.getPosition())\n            let calcLinear = Utils.calcLinearVelocity(beginPoint, sender.moveTimeEndPoint, sender.moveTimeSpeed)\n            let movePos = v2(beginPoint.x + calcLinear.x, beginPoint.y + calcLinear.y)\n            sender.setPosition(movePos)\n            beginPoint = movePos\n            if (Utils.compareDistance(beginPoint, sender.moveTimeEndPoint, sender.moveTimeSpeed) <= 0) {\n                log(\"close token\", sender.moveTimeToken)\n                TimerManager.removeTimer(widget[\"moveTimeUpdate\"])\n                TimerManager.removeTimerWithToken(sender.moveTimeToken)\n                sender.setPosition(sender.moveTimeEndPoint)\n                if (sender.moveTimeCallBack) {\n                    if (sender.moveTimeCallbackData) {\n                        sender.moveTimeCallBack(sender.moveTimeCallbackData)\n                    } else {\n                        sender.moveTimeCallBack()\n                    }\n                }\n            }\n        }\n        TimerManager.addFrame(1, widget[\"moveTimeUpdate\"], null, true, widget, widget[\"moveTimeToken\"])\n    }\n\n    // 创建新的带有Button组件的节点\n    static newButton(): Node {\n        let node: Node = new Node();\n        node.addComponent(Button);\n        node.addComponent(UITransform);\n        node.addComponent(UIOpacity);\n        return node;\n    }\n\n    // 设置Button的不同状态下的对应纹理\n    static setButtonTexture(node: Node, normal?: string, pressed?: string): void {\n        if (node == null) {\n            return;\n        }\n\n        let btn: ComButton = node.getComponent(ComButton)!;\n        if (btn != null) {\n            if (normal != null) {\n                let frame = TextureManager.getSpriteFrameFromCache(normal);\n                btn.normalSprite = frame;\n            }\n            if (pressed != null) {\n                let frame = TextureManager.getSpriteFrameFromCache(pressed);\n                btn.pressedSprite = frame;\n            }\n        }\n    }\n\n    static filterGrey(node: Node, isGrey: boolean): void {\n        if (!node) {\n            return;\n        }\n\n        let btnComp = node.getComponent(Button);\n        if (btnComp) {\n            btnComp.disabledSprite = null\n        }\n\n        let clickComp = node.getComponent(ComButton);\n        if (clickComp) {\n            clickComp.disabledSprite = null\n        }\n\n        let spComp: Sprite = node.getComponent(Sprite);\n        if (spComp) {\n            spComp.grayscale = isGrey;\n        }\n\n        let labelComp: Label = node.getComponent(Label);\n        if (labelComp) {\n            if (isGrey) {\n                const mat = builtinResMgr.get<Material>('ui-sprite-gray-material')\n                labelComp.customMaterial = mat\n            } else {\n                labelComp.customMaterial = undefined // 先不考虑使用者自带material的情况 有需求再改\n            }\n        }\n\n        for (let i = 0; i < node.children.length; i++) {\n            let child = node.children[i];\n            Display.filterGrey(child, isGrey);\n        }\n    }\n\n\n    // 设置Label组件的string\n    static setLabelString(node: Node, text: string | number): Label {\n        if (!node) {\n            LogManager.debugLog(\"setLabelString error: node undefined\")\n            return\n        }\n        let s = node.getComponent(Label);\n        let str: string = text + \"\"\n        if (s != null) {\n            s.string = str;\n        }\n        return s\n    }\n\n    //设置Label组件的color\n    static setLabelColor(node: Node, color: Color): Label {\n        let s = node.getComponent(Label);\n        if (s != null) {\n            s.color = color;\n        }\n        return s\n    }\n\n\n    //设置描边组件\n    static setLabelOutline(node: Node, color: Color, width?: number): LabelOutlineComponent {\n        let s = node.getComponent(LabelOutlineComponent);\n        if (s != null) {\n            s.color = color;\n            s.width = width || 2\n        }\n\n        return s\n    }\n\n    //设置Label组件的fontSize\n    static setLabelFontSize(node: Node, fontSize: number): Label {\n        let s = node.getComponent(Label);\n        if (s != null) {\n            s.fontSize = fontSize;\n        }\n        return s\n    }\n\n    // 设置Button组件的Label里的string\n    static setButtonString(node: Node, text: string): void {\n        let s = node.getComponent(Button);\n        if (s != null) {\n            let label = s.getComponentInChildren(Label);\n            if (label != null) {\n                label.string = text;\n            }\n        }\n    }\n\n    /**\n     * 设置已经加载的spriteFrame（使用时要确认资源已经加载）\n     * @param node 显示对象 或组件\n     * @param path 要设置的资源\n     * \n     */\n    static setSpriteFrame(node: Node | Sprite, path: string): void {\n        if (!node || !path) {\n            return;\n        }\n        let frame = TextureManager.getSpriteFrameFromCache(path);\n        if (frame) {\n            if (node instanceof Sprite) {\n                node.spriteFrame = frame;\n            } else if (node instanceof Node) {\n                let s = node.getComponent(Sprite);\n                if (s) {\n                    s.spriteFrame = frame;\n                } else {\n                    s = node.addComponent(Sprite);\n                    s.spriteFrame = frame;\n                }\n            }\n        } else {\n            console.warn(\"!!!setSpriteFrame!!!:\", path);\n\n        }\n    }\n\n\n    /**\n     * 加载并设置图片，当节点销毁时会释放资源\n     * (如果节点不销毁，需要手动释放资源，用Display.unloadImage方法释放)\n     * @param node 节点或者Sprite组件\n     * @param path 资源路径 \n     * @param tCallback 回调函数，可传null\n     * @param targetObj 调用者，可传null\n     * @param isAutoReleaseImage 当节点销毁时释放资源，true释放（默认）,false:不释放\n     * @param lev 加载优先级 默认0\n     */\n    static loadAndSetImage(obj: Node | Sprite, path: string, tCallback: Function = null, targetObj: any = null, isAutoReleaseImage: boolean = true, lev: number = 0, bundleName = BundleName.Resources): boolean {\n        if (!obj) {\n            return false;\n        }\n        let node;\n        if (obj instanceof Sprite) {\n            node = obj.node;\n        } else {\n            node = obj;\n        }\n        let comp: LoadAndSetImageComponent = node.getComponent(LoadAndSetImageComponent);\n        if (!comp) {\n            comp = node.addComponent(LoadAndSetImageComponent);\n        }\n\n        comp.setResPath(path, tCallback, targetObj, isAutoReleaseImage, lev, bundleName);\n\n        return true;\n    }\n\n    /**\n     * 释放资源资源\n     * 注：只释放loadAndSetImage加载的资源） */\n    static unloadImage(obj: Node | Sprite, path?: string) {\n        let node;\n        if (!obj) {\n            return\n        }\n        if (obj instanceof Sprite) {\n            node = obj.node;\n        } else {\n            node = obj;\n        }\n        let comp: LoadAndSetImageComponent = node.getComponent(LoadAndSetImageComponent);\n        if (comp) {\n            comp.unLoadRes();\n        }\n\n    }\n\n\n    /**\n     * \n     * @param click_widget 点击的对象\n     * @param click_func 触发的函数\n     * @param target 目标（触发的函数回调的调用者）\n     * @param extParams  额外参数\n     */\n    static setClickEventByType(click_widget: Node, click_func: Function, target: any, extParams?: INewComButtonPExt) {\n        let f = (event) => {\n            if (target) {\n                click_func.call(target, click_widget, event)\n            } else {\n                click_func(click_widget, event)\n            }\n        }\n\n        ComponentHelper.getInstance().newComButton({\n            node: click_widget,\n            clickFunc: f,\n            param: extParams\n        })\n    }\n\n\n    static removeComAllClickFunc(click_widget: Node) {\n        let combutton = click_widget.getComponent(ComButton)\n        if (combutton) {\n            combutton.removeAllClickFunc()\n        }\n    }\n\n    /**移除按钮中的事件并且移除点击按钮组件 */\n    static removeComAllClickFuncAndComButton(click_widget: Node) {\n        let combutton = click_widget.getComponent(ComButton)\n        if (combutton) {\n            combutton.removeAllClickFunc()\n            combutton.destroy()\n        }\n    }\n\n\n    // 设置资产图片\n    static setAssetImg(img: Node, base_id: number): void {\n        if (base_id < 10000) {\n            base_id = 10000\n            LogManager.debugLog(\"base_id must be bigger than 10000\")\n        }\n\n        Display.setSpriteFrame(img, js.formatStr(\"img_asset_%s\", base_id));\n    }\n\n    /**\n     * 目标椭圆旋转\n     * @param target 旋转目标\n     * @param pos 椭圆中心\n     * @param radiusA 椭圆长半轴\n     * @param radiusB 椭圆短半轴\n     * @param speed 每秒旋转的度数\n     * @param isCounterclockwise 是否逆时针旋转\n     * @param token 标识\n     * @param angle 初始角度\n     * @param isCheckZ 检测层次\n     * @param loops旋转圈数\n     * @param cbData旋转完成回调\n     */\n    static playEllipseAction(target: Node, pos, radiusA, radiusB, speed: number, isCounterclockwise, token, angle: number, isCheckZ, loops: number, cbData?: CallbackData) {\n        TimerManager.removeTimerWithToken(token);\n\n        angle = angle ? angle : 0;\n        let time: number = 10;\n        speed = speed * time / 1000;\n\n        // 圈数\n        loops = loops ? loops : 0;\n        let baseAngle: number = 0;\n        let count: number = 0;\n\n        TimerManager.addTimer(10, function () {\n            if (isCounterclockwise == true) {\n                angle = angle + speed;\n                if (angle >= 360) {\n                    angle = 0;\n                }\n            } else {\n                angle = angle - speed;\n                if (angle <= 0) {\n                    angle = 360;\n                }\n            }\n            if (isCheckZ) {\n                if (angle > 40 && angle < 140) {\n                    target.setPosition(v3(target.getPosition().x, target.getPosition().y, 0));\n                } else {\n                    target.setPosition(v3(target.getPosition().x, target.getPosition().y, 1));\n                }\n            }\n\n            if (loops > 0) {\n                baseAngle = baseAngle + speed;\n                if (baseAngle >= 360) {\n                    baseAngle = baseAngle - 360;\n                    count = count + 1;\n                    if (count >= loops) {\n                        TimerManager.removeTimerWithToken(token);\n                        if (cbData) {\n                            cbData.execute();\n                        }\n                    }\n                }\n            }\n\n            let x = radiusA * Math.cos(Display.angle2radian(angle)) + pos.x;\n            let y = radiusB * Math.sin(Display.angle2radian(angle)) + pos.y;\n            target.setPosition(x, y);\n        }, target, true, null, token);\n    }\n\n    /**\n     * 角度转成弧度\n     * @param angle 角度\n     */\n    static angle2radian(angle: number): number {\n        return angle * (Math.PI / 180);\n    }\n\n\n\n    /**\n     * 创建显示对象并赋资源 (不会加载资源)\n     * @param img_path 资源路径\n     */\n    static newImage(img_path: string, nodeNmae?: string): Node {\n        nodeNmae = nodeNmae || \"imgNode\"\n        let imgNode = new Node(nodeNmae);\n        let cachedFrame = TextureManager.getSpriteFrameFromCache(img_path);\n        let sprite = imgNode.addComponent(Sprite);\n        if (cachedFrame) {\n            if (imgNode && imgNode.isValid) {\n                sprite.spriteFrame = cachedFrame;\n            }\n        } else {\n            console.error(\"!!内存里没有这个资源!! \", img_path);\n        }\n\n        return imgNode;\n    }\n\n\n    /**\n     * 创见显示对象并设置粒子效果\n     * @param particlePath 粒子效果路径\n     */\n    static newParticle(particlePath: string, bundleName = BundleName.particle): Node {\n        let particleNode = Display.newNode(\"particle\");\n        let particleComp = particleNode.addComponent(ParticleSystem2D);\n        particleComp.playOnLoad = true;\n\n        let partileFile = TextureManager.getParticleByUrl(particlePath, bundleName)\n\n        if (partileFile) {\n            particleComp.file = partileFile;\n        }\n        return particleNode;\n    }\n\n    /**\n     * 创建新的带颜色的层\n     * @param color 颜色\n     */\n    static newColorLayer(color: Color, size: Size): Node {\n        let node: Node = Display.newSprite();\n        node.getComponent(Sprite).color = color;\n        Display.setSpriteFrame(node, \"img_white\");\n        node.getComponent(UITransform).setContentSize(size);\n        // let node_ctx = node.addComponent(Graphics);//有Sprite不能再加Graphics\n        // node_ctx.rect(0, 0, size.width, size.height);\n        // node_ctx.fillColor = color\n        // node_ctx.fill();\n        return node;\n    }\n\n    /**\n     * 实例化prefab\n     * @param prefabPath\n     */\n    static instantiatePrefab(prefabPath: string, bundleName = BundleName.Resources): Node {\n        let prefabAsset = TextureManager.getPrefabByUrl(prefabPath, bundleName);\n        let prefabNode;\n        if (prefabAsset) {\n            prefabNode = instantiate(prefabAsset);\n        } else {\n            console.error(\"缓存中没有找到这个prefab资源!! \", bundleName, prefabPath);\n        }\n\n        AutoPrefabI18nMgr.transLabel(prefabPath, prefabNode)\n\n        return prefabNode;\n    }\n\n    /**\n     * 把传入的节点添加一层灰色（非滤镜方案，需要滤镜的调用filterGrey）\n     * @param node\n     * @param isGrey \n     * @param rate \n     */\n    static colorGrey(node: Node, isGrey?: boolean, rate?: number) {\n        if (!node || !node.isValid || !node.getComponent(Sprite)) {\n            return;\n        }\n\n        if (isGrey) {\n            if (rate) {\n                rate = Math.max(rate, 0);\n                rate = Math.min(rate, 1);\n                rate = 1 - rate;\n                node.getComponent(Sprite).color = new Color(255 * rate, 255 * rate, 255 * rate);\n            } else {\n                node.getComponent(Sprite).color = new Color(150, 150, 150);\n            }\n        } else {\n            node.getComponent(Sprite).color = Color.WHITE;\n        }\n    }\n\n    // static playClickSound(soundId?) {\n    //     if (soundId && soundId <= 0) {\n    //         return\n    //     }\n    //     if (SoundManager.isInit) {\n    //         soundId = soundId || SoundCfg.effect.comm_click_sound\n    //         AudioEngine.playEffect(soundId)\n    //     }\n    // }\n\n    // 获取无黑边等比缩放比例\n    // @return 一个缩放比\n    static getNoBorderScaleValue(nodeWidth, nodeHeight) {\n        let gameWidth = Display.width\n        let gameHeight = Display.height\n\n        let sx = gameWidth / nodeWidth\n        let sy = gameHeight / nodeHeight\n\n        let maxScale = 0\n\n        if (sx > sy) {\n            maxScale = sx\n        } else {\n            maxScale = sy\n        }\n\n        return maxScale\n    }\n\n\n    public static createLoadingAction(objList: Node[], interval: number, token: string) {\n        TimerManager.removeTimerWithToken(token);\n        let index = 0\n        let showObjList = function () {\n            for (const i in objList) {\n                const v = objList[i];\n                v.active = (parseInt(i) <= index)\n            }\n        }\n        TimerManager.addTimer(interval * 1000, function () {\n            index = index + 1\n            if (index > objList.length) {\n                index = 1\n            }\n            showObjList()\n        }, this, true, null, objList)\n        showObjList()\n    }\n\n    public static getFullFrameScale() {\n        let scale = 1\n\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n            let frameSize = Display.sizeInPixels\n            let contentSize = size(0, 0)\n            scale = (frameSize.height / Display.design_height) / (frameSize.width / Display.design_width)\n        }\n\n        return scale\n    }\n\n\n    // 设置精灵边框\n    public static setSpriteFrameRect(node: Node, top: number, botton: number, left: number, right: number) {\n        let sprite = node.getComponent(Sprite)\n        if (sprite) {\n            sprite.type = Sprite.Type.SLICED;\n            if (!sprite.spriteFrame) sprite.spriteFrame = new SpriteFrame();\n            sprite.spriteFrame.insetTop = (top)\n            sprite.spriteFrame.insetBottom = (botton)\n            sprite.spriteFrame.insetLeft = (left)\n            sprite.spriteFrame.insetRight = (right)\n        }\n    }\n\n    public static setButtonTextColor(node: Node, color: Color) {\n        node.getChildByName(\"Label\").getComponent(Label).color = color\n    }\n\n    public static playRotateActionUp(node: Node, fAngle, tAngle) {\n        node.angle = fAngle != null ? fAngle : 0\n        tween(node).to(0.2, { angle: tAngle != null ? tAngle : -90 }).start();\n    }\n\n    public static playRotateActionDown(node: Node, fAngle, tAngle) {\n        node.angle = fAngle != null ? fAngle : -90\n        tween(node).to(0.2, { angle: tAngle != null ? tAngle : 0 }).start();\n    }\n\n\n    // public static widgetBtnSmallAim(nodeObj, smallScale?: number) {\n    //     let scale = 0.9\n    //     if (smallScale) {\n    //         scale = smallScale\n    //     }\n    //     nodeObj.stopAllActions()\n    //     nodeObj.runAction(\n    //         scaleTo(0.1, scale * nodeObj.scaleX / Math.abs(nodeObj.scaleX),\n    //             scale * nodeObj.scaleY / Math.abs(nodeObj.scaleY))\n    //     )\n    // }\n\n    //todo func可能会因为this对象没指定而有问题\n    // public static widgetResume(nodeObj, func?: any, resumeScale?: number) {\n    //     let scale = 1\n    //     if (resumeScale) {\n    //         scale = resumeScale\n    //     }\n    //     nodeObj.stopAllActions()\n    //     nodeObj.runAction(\n    //         sequence(\n    //             scaleTo(0.1, scale),\n    //             callFunc(function (nodeObj) {\n    //                 if (func) {\n    //                     func(nodeObj)\n    //                 }\n    //             })\n    //         )\n    //     )\n    // }\n\n    // cc引擎在节点添加到场景，即实际能渲染时，部分接口才会生效\n    //例如setContentSize，因此添加如下接口。\n    public static runAfterRender(comp: Component, cbFunc: any, target?: any) {\n        if (comp) {\n            comp[\"start\"] = function () {\n                if (target) {\n                    cbFunc.apply(target, []);\n                } else {\n                    cbFunc();\n                }\n            }\n\n            // comp[\"onLoad\"] = function () {\n            //     if (target) {\n            //         cbFunc.apply(target, []);\n            //     } else {\n            //         cbFunc();\n            //     }\n            // }\n        }\n    }\n\n    // 设施按钮是否可以点击\n    public static setButtonIsCanClick(node: Node, isCanClick: boolean) {\n        if (isCanClick) {\n            node.resumeSystemEvents(true);\n        } else {\n            node.pauseSystemEvents(true);\n        }\n    }\n\n    // 持续缩放动画\n    public static scaleForeverAnim(target: Node, bigS?: number, smallS?: number, time?: number) {\n        Tween.stopAllByTarget(target);\n        let toScale1: number | Vec3 = bigS || 0.1;\n        toScale1 = v3(target.scale.x + toScale1, target.scale.y + toScale1, target.scale.z + toScale1);\n        let toScale2: number | Vec3 = -(smallS || 0.1);\n        toScale2 = v3(target.scale.x + toScale2, target.scale.y + toScale2, target.scale.z + toScale2);\n\n        time = time || 0.6\n        tween(target).repeatForever(tween(target).to(time, { scale: toScale1.clone() }).to(time, { scale: toScale2.clone() })).start();\n    }\n\n    public static isIphoneX() {\n        // return true\n        return SdkManager.getInstance().isIphoneX()\n    }\n\n    /**\n     * itemicon 图片已经打成图集\n     * @param node \n     * @param iconPath  item_100001\n     */\n    static loadItemIconImg(node: Node, iconPath: string, finishCallBack?: () => void) {\n\n        let plistPath = PathDefine.getItemIconPlistPath(iconPath)\n        if (!plistPath) {\n            return\n        }\n        let sprFrame = TextureManager.getSpriteFrameFromCache(iconPath)\n        let spriteComp = node.getComponent(Sprite);\n        if (spriteComp == null) {\n            node.addComponent(Sprite);\n        }\n\n        node[\"__loadItemIconImg_iconPath\"] = iconPath\n\n        if (sprFrame) {\n            node.getComponent(Sprite).spriteFrame = sprFrame\n        } else {\n            TextureManager.loadPlist({\n                resPath: plistPath,\n                callback: function (sprFrame: SpriteFrame) {\n                    if (node.isValid && node[\"__loadItemIconImg_iconPath\"] == iconPath) {\n                        node.getComponent(Sprite).spriteFrame = TextureManager.getSpriteFrameFromCache(iconPath)\n                        finishCallBack && finishCallBack()\n                    }\n                }, target: this\n            })\n        }\n    }\n\n    /**\n     * 小游戏特殊处理缩放\n     * @param node 要缩放的节点\n     * @param num 缩放倍数\n     */\n    static littleGameScale(node: Node, numX?: number, numY?: number) {\n        if (SdkManager.getInstance().isHasScaleRes()) {\n            if (numX != undefined && numY != undefined) {\n                node.setScale(node.scale.x * numX, node.scale.y * numY)\n            }\n            else if (numX != undefined) {\n                node.setScale(node.scale.x * numX, node.scale.y * numX)\n            }\n            else {\n                node.setScale(node.scale.x * 1.25, node.scale.y * 1.25)\n            }\n\n        }\n    }\n\n    //小游戏按钮偏移\n    static sdkRightTopMove(closeBtn: Node, movePos?: Vec2): boolean {\n        if (!closeBtn) {\n            return false;\n        }\n\n        if (SdkManager.getInstance().isSmallGame()) {\n\n            let pos = movePos == undefined ? Display.MOVE_LEFT : movePos;\n            closeBtn.setPosition(closeBtn.getPosition().x + pos.x, closeBtn.getPosition().y + pos.y);\n            return true;\n        }\n        return false;\n    }\n\n    static getHeightAdaptionScale() {\n        let scale = v3(1, 1, 1)\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_HEIGHT) {\n            scale = Display.getMaxScal()\n        }\n        return scale\n    }\n\n    static showAssets(node: Node, num: number): Label {\n        let s = node.getComponent(Label);\n        let text = \"\"\n        if (num >= 1000000) {\n            text = Math.floor(num / 10000) + language.numlv.wan;\n        } else {\n            text = num + \"\"\n        }\n\n        if (s != null) {\n            s.string = text;\n        }\n\n        return s\n    }\n\n    /**把超过100万的数字改成万为单位，返回字符串 by lwx */\n    static numToWanString(num: number): string {\n        let text = ''\n        if (num >= 1000000) {\n            text = Math.floor(num / 10000) + language.numlv.wan;\n        } else {\n            text = num + \"\"\n        }\n        return text\n    }\n\n    /**\n     * 数字显示缩写\n     * @param node label结点\n     * @param num 数量\n     * @param abbreviation 大于多少显示缩写\n     */\n    static numberAbbreviation(node: Node, num: number, abbreviation: number): Label {\n        let s = node.getComponent(Label);\n        let text = \"\"\n        //亿\n        if (num >= 100000000) {\n            text = Math.floor(num / 100000000) + language.numlv.yi;\n        } else if (num >= abbreviation) {\n            text = Math.floor(num / 10000) + language.numlv.wan;\n        } else {\n            text = num + \"\"\n        }\n\n        if (s != null) {\n            s.string = text;\n        }\n\n        return s\n    }\n\n    /**返回数字缩写带单位 */\n    static numberShort(num: number, abbreviation: number): string {\n        let text = \"\"\n        //亿\n        if (num >= 100000000) {\n            text = Math.floor(num / 100000000) + language.numlv.yi;\n        } else if (num >= abbreviation) {\n            text = Math.floor(num / 10000) + language.numlv.wan;\n        } else {\n            text = num + \"\"\n        }\n\n        return text;\n    }\n\n\n    static doShake(node: Node) {\n        let pos = node.getPosition();\n        let offset = 10;\n        tween(node).to(0.03, {\n            position: v3(pos.x - (2 + offset), pos.y + (offset + 10))\n        }).to(0.03, {\n            position: v3(pos.x + (1 + offset), pos.y - (offset + 1))\n        }).set({\n            position: pos\n        }).union().repeat(2).start();\n    }\n\n    static showNum(num: number) {\n        let text = \"\"\n        if (num >= 10000 && num < 100000000) {\n            let thousand = Math.floor(num / 10000)\n            let kilobit = Math.floor(num % 10000 / 1000)//千位数\n            let hundred = Math.floor(num % 1000 / 100)//百位数\n            return text = thousand + \".\" + kilobit + language.numlv.wan\n        } else if (num >= 100000000) {\n            let hundreds_millions = Math.floor(num / 100000000)\n            let millions_millions = Math.floor(num % 100000000 / 10000000) //千万位\n            let million = Math.floor(num % 10000000 / 1000000) //百万位\n            return text = hundreds_millions + \".\" + millions_millions + language.numlv.yi\n        } else {\n            return text = num + \"\"\n        }\n    }\n\n\n\n    /**\n     * 关闭当前打开的窗口\n     * @param winName \n     */\n    static closeOpeningWinDow(winName: string) {\n        if (!winName || winName == \"\") {\n            return;\n        }\n        let win = WindowManager.getInstance().getWinByName(winName);\n        if (win) {\n            win.closeBySelf();\n        }\n    }\n\n\n    /**\n     * 设置背景尺寸\n     */\n    static setBgMaxSize(node: Node) {\n        if (!node) {\n            if (DEBUG) {\n                log(\"node为空\");\n            }\n            return;\n        }\n\n        node.getComponent(UITransform).setAnchorPoint(v2(0, 0));\n        node.setPosition(0, 0);\n        node.getComponent(UITransform).height = Display.height;\n        node.getComponent(UITransform).width = Display.design_width;\n        node.setScale(v3(Display.getMaxScal()));\n\n    }\n\n\n    /**\n     * 移出屏幕隐藏\n     * @params 节点或节点数组\n     */\n    static moveOutHidWithNode(params: Node | Node[]) {\n        if (params instanceof Node) {\n            let moisCom = params.getComponent(MoveOutInScreenComponent)\n            if (!moisCom) {\n                moisCom = params.addComponent(MoveOutInScreenComponent)\n            }\n            moisCom.moveOut();\n            params.active = false;\n        } else {\n            for (const i in params) {\n                const node = params[i];\n                let moisCom = node.getComponent(MoveOutInScreenComponent)\n                if (!moisCom) {\n                    moisCom = node.addComponent(MoveOutInScreenComponent)\n                }\n                moisCom.moveOut();\n                node.active = false;\n            }\n        }\n\n    }\n\n\n    /**\n     * 移进显示区\n     * @params 节点或节点数组\n     * @originalX 移入时指定位置\n     * @noDelay 不要移时执行\n     */\n    static moveInShowWithNode(params: Node | Node[], originalX?: number, noDelay?: boolean) {\n        if (!params) {\n            return;\n        }\n        if (params instanceof Node) {\n\n            let moisCom = params.getComponent(MoveOutInScreenComponent)\n            if (!moisCom) {\n                moisCom = params.addComponent(MoveOutInScreenComponent)\n            }\n            moisCom.moveIn(noDelay, originalX);\n            params.active = true;\n        } else {\n            for (const i in params) {\n                const node = params[i];\n                let moisCom = node.getComponent(MoveOutInScreenComponent)\n                if (!moisCom) {\n                    moisCom = node.addComponent(MoveOutInScreenComponent)\n                }\n                moisCom.moveIn(noDelay, originalX);\n                node.active = true;\n            }\n        }\n    }\n\n    /**获取fnt字体大小，传入的ttf字体大小+2 */\n    static getfntSize(size: number) {\n        //当前只有中文支持\n        // if (isNaN(size)) {\n        //     return 38;\n        // }\n        // return size + 2;    \n        return 38;\n    }\n\n    static getValidRect() {\n        return Display.validRect;\n    }\n\n\n    /**\n     * 传入时装ID，设置时装模型的时装\n     * @param model 时装模型\n     * @param fashionSetsId 时装套装ID\n     */\n    static setModelFashion(model: RoleObjectAnimation, fashionSetsId: number) {\n        if (!model || !fashionSetsId) {\n            return;\n        }\n        let itemSuit = FashionData.getInstance().getFashionSetsById(fashionSetsId)\n\n        if (itemSuit && itemSuit.sets) {\n            let tempArr = Utils.str2arr(itemSuit.sets);\n            let modelFashionList = []\n\n            for (let i = 0; i < tempArr.length; i++) {\n                const element = tempArr[i];\n                let fId = Number(element[1]);\n                let itemPart = FashionData.getInstance().getFashionItem(fId);\n                if (itemPart) {\n                    let fpd = new FashionPartData();\n                    fpd.id = itemPart.id;\n                    fpd.type = itemPart.type;\n                    modelFashionList.push({\n                        id: itemPart.id,\n                        type: itemPart.type,\n                    });\n                }\n            }\n\n            // 搭配展示妆容\n            if (itemSuit.makeup_sets) {\n                let faceCfg = FashionData.getInstance().getCosmeticsSetsDataById(itemSuit.makeup_sets);\n                if (faceCfg) {\n                    let setsStr = faceCfg.sets;\n                    let setsArr = Utils.str2arr(setsStr);\n                    for (const key_setsArr in setsArr) {\n                        const element_setsArr = setsArr[key_setsArr];\n                        modelFashionList.push({\n                            id: element_setsArr[1],\n                            type: element_setsArr[0],\n                        });\n                    }\n                }\n            }\n\n            model.setData({ ary_looks: modelFashionList });\n        }\n    }\n\n    /**\n     * 传入时装ID，设置时装模型的时装\n     * @param model 时装模型\n     * @param fashion_id 时装套装ID\n     */\n    static setModelFashionWithMyFace(model: RoleObjectAnimation, fashion_id: number) {\n        if (!model || !fashion_id) {\n            return;\n        }\n        let itemSuit = FashionData.getInstance().getFashionSetsById(fashion_id)\n\n        if (itemSuit && itemSuit.sets) {\n            let tempArr = Utils.str2arr(itemSuit.sets);\n            let modelFashionList = []\n\n            for (let i = 0; i < tempArr.length; i++) {\n                const element = tempArr[i];\n                let fId = Number(element[1]);\n                let itemPart = FashionData.getInstance().getFashionItem(fId);\n                if (itemPart) {\n                    let fpd = new FashionPartData();\n                    fpd.id = itemPart.id;\n                    fpd.type = itemPart.type;\n                    modelFashionList.push(fpd);\n                }\n            }\n\n            let faceData = FashionManager.getInstance().getdefaulFaceData();\n            if (faceData) {\n                for (const faceKey in faceData) {\n                    const faceOne = faceData[faceKey];\n                    modelFashionList.push(faceOne);\n                }\n            }\n            model.setData({ ary_looks: modelFashionList });\n        }\n    }\n\n    /**\n    * 过滤特殊字符及Emoji表情符号\n    * @param inputString 传入的字符串\n    */\n    static filterSpecialChar(inputString: string): string {\n        let pattern = new RegExp(\"[`~!@#$^&*()=|{}':;',\\\\[\\\\].<>《》/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]\");\n        // 过滤特殊字符\n        let subString = inputString.replace(pattern, '');\n        let tmpString = inputString;\n        let isTheSame: boolean = subString != tmpString\n        while (subString != tmpString) {\n            tmpString = subString;\n            subString = subString.replace(pattern, '');\n        }\n        // emoji表情字符过滤\n        let rep = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|\\ud83c[\\ude32-\\ude3a]|\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/g;\n        subString = subString.replace(rep, \"\");\n        return subString;\n    }\n\n    /**\n     * 发送数据到本地服务器 并将数据保存到指定路径下（需要提前启动本地服务器）\n     * @param data JSON数据 不必主动转成String格式\n     * @param filePath 数据存放的路径 默认值为./_noUpdate/${Date.now()}.txt\n     * @param type 请求类型 0: 写文本 1: 读文本 2: 写Excel 3: 读Excel\n     * @param port 服务器端口 默认3000\n     * @param successCb 成功请求回调 回参中若data.code为200 表示请求且处理成功了 其它情况表示处理失败\n     * @param failCb 失败请求回调\n     * @returns \n     */\n    static writeFileToLocal(data: any, filePath?: string, type: number = 0, port: number = 3000, successCb?: (data: { code: number, msg?: string, data?: any }) => void, failCb?: () => void) {\n        if (!data) {\n            return\n        }\n\n        let xhr = new XMLHttpRequest();\n        xhr.open('POST', `http://127.0.0.1:${port}`, true);\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        // xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4 && (xhr.status >= 200 && xhr.status < 300)) {\n                let response = xhr.responseText;\n                successCb && successCb(JSON.parse(response));\n            }\n        }\n        xhr.onerror = function () {\n            failCb && failCb();\n        }\n\n        let tmpData = {\n            type: type,\n            filePath: filePath,\n            fileData: JSON.stringify(data)\n        }\n        xhr.send(JSON.stringify(tmpData));\n    }\n\n\n\n    /**\n     *\n     *\n     * @static  创建材质并设置其texture，主要用于漫反射贴图，模型贴图\n     * @param {Texture2D} res Texture资源\n     * @param {Material} [material]  材质\n     * @param {Material} passIndex 渲染使用的 Pass 对象数组,默认0\n     * @return {*}  {Material} \n     * @memberof Display\n     */\n    static createAndSetMaterial(res: Texture2D, material?: Material, passIndex?: number): Material {\n        let mat = material;\n        let pass = passIndex || 0;\n        if (mat == null) {\n            mat = new Material();\n            mat.initialize({\n                effectName: \"builtin-standard\",\n                defines: {\n                    USE_ALBEDO_MAP: true\n                },\n            });\n        }\n\n        mat.setProperty(\"mainTexture\", res, pass)\n        mat.setProperty(\"emissiveMap\", res, pass)\n\n        return mat;\n    }\n\n    /**震动节点 */\n    static shakeScreen(node: Node, sType: number, isDef: boolean, pow: number, num?: number, endCallback?, time = 0.04) {\n        sType = sType || 1\n        num = num || 1;\n\n        let d = isDef ? 1 : -1;\n\n        let tx = node.position.x, ty = node.position.y, tz = node.position.z;\n        node.setPosition(tx, ty, tz);\n\n        let arr: Tween<Node>;\n        let ts = time;\n        if (sType == 1) {\n            let dis = 20 * pow;\n            arr = tween(node).to(ts, { position: v3(tx, ty + dis, tz + dis) })\n                .to(ts, { position: v3(tx, ty + dis * 1.5, tz + dis * 1.5) })\n                .to(ts, { position: v3(tx, ty + dis * -1.5, tz + dis * -1.5) })\n                .to(ts, { position: v3(tx, ty, tz) });\n        } else if (sType == 2) {\n            let dis = 20 * pow;\n            arr = tween(node).to(ts, { position: v3(tx, ty + dis, tz + dis) })\n                .to(ts, { position: v3(tx, ty + dis * -1.5, tz + dis * -1.5) })\n                .to(ts, { position: v3(tx, ty + dis * 1.5, tz + dis * 1.5) })\n                .to(ts, { position: v3(tx, ty, tz) });\n        } else if (sType == 3) {\n            let dis = 15 * pow;\n            arr = tween(node).to(ts, { position: v3((tx - dis) * d, ty, tz) })\n                .to(ts, { position: v3((tx + dis * 2 / 3) * d, ty, (tz + dis * 2 / 3) * d) })\n                .to(ts, { position: v3((tx - dis * 1 / 3) * d, ty, (tz + dis * 2 / 3) * d) })\n                .to(ts, { position: v3(tx, ty, tz) });\n        } else if (sType == 4) {\n            let dis = 15 * pow;\n            arr = tween(node).to(ts, { position: v3((tx + dis) * d, ty, (tz + dis) * d) })\n                .to(ts, { position: v3((tx - dis * 2 / 3) * d, ty, (tz - dis * 2 / 3) * d) })\n                .to(ts, { position: v3((tx + dis * 1 / 3) * d, ty, (tz + dis * 1 / 3) * d) })\n                .to(ts, { position: v3(tx, ty, tz) });\n        } else if (sType == 5) {\n            let dis = 20 * pow;\n\n            let x1 = (tx + dis * 3 / 4) * d\n            let y1 = (ty - dis)\n\n            let x2 = (tx - dis * 1 / 2) * d\n            let y2 = (ty + dis * 3 / 4)\n\n            let x3 = (tx + dis * 1 / 4) * d\n            let y3 = (ty - dis * 1 / 2)\n\n            arr = tween(node).to(ts, { position: v3(x1, y1, tz) })\n                .to(ts, { position: v3(x2, y2, tz) })\n                .to(ts, { position: v3(x3, y3, tz) })\n                .to(ts, { position: v3(tx, ty, tz) });\n        } else if (sType == 6) {\n\n            let dis = 20 * pow;\n\n            let x1 = (tx + dis * 3 / 4) * d\n            let y1 = (ty + dis)\n\n            let x2 = (tx - dis * 1 / 2) * d\n            let y2 = (ty - dis * 3 / 4)\n\n            let x3 = (tx + dis * 1 / 4) * d\n            let y3 = (ty + dis * 1 / 2)\n\n            arr = tween(node).to(ts, { position: v3(x1, y1, tz) })\n                .to(ts, { position: v3(x2, y2, tz) })\n                .to(ts, { position: v3(x3, y3, tz) })\n                .to(ts, { position: v3(tx, ty, tz) });\n        }\n\n        if (arr) {\n            tween(node).repeat(num, arr).call(() => {\n                node.setPosition(tx, ty, tz);\n                if (endCallback) {\n                    endCallback()\n                }\n            }).start();\n        }\n    }\n\n\n    /**获取当前分辨率下的屏幕rect */\n    static getScreenRect(): Rect {\n        let rect = new Rect(Display.frameSzie.width / 2, Display.frameSzie.height / 2, Display.frameSzie.width, Display.frameSzie.height);\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_HEIGHT) { //宽屏,高度铺满,可视区域的宽度由高度决定\n            let ratio = Number((Display.design_height / Display.design_width).toFixed(3));\n            rect.width = Display.frameSzie.height / ratio\n        }\n\n        return rect\n    }\n\n    /**\n     * 添加UIMeshComp,用于3d物体显示在ui上,注意node或者子节点必需带有meshrenderer组件\n     */\n    static addUIMeshComponent(node: Node, layer?: number) {\n        let _layer = layer ? layer : LayerHelper.UI_2D\n        Display.setLayer(node, _layer)\n\n        if (node && node.getComponent(MeshRenderer) && !node.getComponent(UIMeshRenderer)) {\n            node.addComponent(UIMeshRenderer);\n        }\n        const childs = node.getComponentsInChildren(MeshRenderer)\n        for (let index = 0; index < childs.length; index++) {\n            const element = childs[index].node;\n            if (element && !element.getComponent(UIMeshRenderer)) {\n                element.addComponent(UIMeshRenderer);\n            }\n        }\n    }\n\n    /** 合适的屏幕尺寸 */\n    static suitableUISize: Size = new Size(1024, 1821)\n    /** 合适的屏幕宽比屏幕设计宽 */\n    static suitableWidthScale: number = 1\n    /** 合适的屏幕高比屏幕设计高 */\n    static suitableHeightScale: number = 1\n\n    /** 更新合适的屏幕尺寸 */\n    static updateSuitableUISize() {\n        let designSize = view.getDesignResolutionSize() // 设计分辨率\n        let visibleSize = view.getVisibleSize() // 实际分辨率\n\n        let realHeight = designSize.height\n        let realWidth = designSize.width\n\n        if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_HEIGHT) {\n            realWidth = visibleSize.width / visibleSize.height * realHeight\n            if (realWidth > designSize.width) { // 高适配下 左右多出来的内容不显示内容\n                realWidth = designSize.width\n            }\n\n        } else if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n            realHeight = visibleSize.height / visibleSize.width * realWidth\n        }\n        this.suitableUISize.width = realWidth\n        this.suitableUISize.height = realHeight\n        this.suitableWidthScale = realWidth / designSize.width\n        this.suitableHeightScale = realHeight / designSize.height\n        console.log(`Update Suitable UISize: witdh(${this.suitableUISize.width}), height(${this.suitableUISize.height}), widthScale(${this.suitableWidthScale}), heightScale(${this.suitableHeightScale})`)\n    }\n\n\n    /**\n * 等比例缩放节点以达到全屏的目的,跟newwinbase方法一致\n * @param node \n * @param mode 缩放方式 SCALE: 修改节点的大小, SIZE: 修改节点的宽高\n * @param real 为真表示根据node的真实宽高去计算 为假表示根据屏幕分辨率的比例变化去计算 默认为真\n */\n    static fullNode(node: Node, mode: \"SCALE\" | \"SIZE\" = \"SIZE\", real: boolean = true) {\n        if (!node) {\n            return\n        }\n\n        let designSize = view.getDesignResolutionSize() // 设计分辨率\n        let suitableSize = Display.suitableUISize // 实际分辨率\n        let updateScale = 1\n\n        if (real) {\n            let uiTrans = node._uiProps.uiTransformComp\n            if (!uiTrans) {\n                console.warn(\"节点上不存在UITransform组件\", node.name)\n                return\n            }\n\n            let nodeSize = new Size(uiTrans.width * node.scale.x, uiTrans.height * node.scale.y)\n            let realScale = suitableSize.height / suitableSize.width\n            let nodeScale = nodeSize.height / nodeSize.width\n\n            if (nodeScale > realScale) { // node相对而言更高 \n                updateScale = suitableSize.width / nodeSize.width\n            } else {\n                updateScale = suitableSize.height / nodeSize.height\n            }\n        } else {\n            if (Display.curResolutionPolicy == ResolutionPolicy.FIXED_WIDTH) {\n                updateScale = Number((suitableSize.height / designSize.height).toFixed(2)) + 0.01\n            } else {\n                // 都高适配了。。我还需要做什么？\n            }\n        }\n\n        if (updateScale <= 1) {\n            return\n        }\n\n        if (mode == \"SCALE\") {\n            node.setScale(node.scale.x * updateScale, node.scale.y * updateScale, node.scale.z)\n        } else if (mode == \"SIZE\") {\n            let uiTrans = node._uiProps.uiTransformComp\n            if (!uiTrans) {\n                console.warn(\"节点上不存在UITransform组件\", node.name)\n                return\n            }\n            uiTrans.setContentSize(uiTrans.width * updateScale, uiTrans.height * updateScale)\n        }\n    }\n\n    /**\n     * 设置节点的可见情况（注意 该方法只是改变透明度 所以如果节点带有可点击方法 点击节点区域还是可能会响应方法的）\n     * @param node \n     * @param isVisible \n     */\n    static setNodeVisible(node: Node, isVisible: boolean) {\n        if (!node) {\n            return\n        }\n        let comp = node.getComponent(UIOpacity)\n        if (!comp) {\n            comp = node.addComponent(UIOpacity)\n        }\n\n        comp.opacity = isVisible ? 255 : 0\n    }\n\n    static setNodeColor(node: Node, color: Color) {\n        let comp = node.getComponent(UIRenderer)\n        if (!comp) {\n            return\n        }\n\n        comp.color = color\n    }\n\n    /**自动点击  传入对应节点的世界坐标  (手机端存在点问题)*/\n    static autoClick(worldPos: Vec3) {\n        // let worldPos = v2(1361.5, 415.5)\n        let posA = v2(Display.visibleToScreenX(worldPos.x), Display.visibleToScreenX(worldPos.y))\n\n        input.activeDispatchEventTouch(posA.x, posA.y, Input.EventType.TOUCH_START)\n        setTimeout(() => {\n            input.activeDispatchEventTouch(posA.x, posA.y, Input.EventType.TOUCH_END)\n        }, 10);\n    }\n\n    /**自动点击 \n     * widget 传入对应节点\n     * posX：相对中心点的偏移X\n     * posY：相对中心点的偏移Y\n     */\n    static fakeClick(widget: Node, posX?: number, posY?: number): boolean {\n        posX = posX ? posX : widget.position.x\n        posY = posY ? posY : widget.position.y\n        if (isValid(widget, true)) {\n            let changedTouches: Touch[] = [];\n            let endEvent = new EventTouch(changedTouches, true, Node.EventType.TOUCH_END);\n            endEvent.touch = new Touch(posX, posY);\n            let startEvent = new EventTouch(changedTouches, true, Node.EventType.TOUCH_START);\n            startEvent.touch = new Touch(posX, posY);\n            widget.emit(Node.EventType.TOUCH_START, startEvent);\n            widget.emit(Node.EventType.TOUCH_END, endEvent);\n            return true;\n        }\n        return false;\n    }\n}\n"]}