{"version":3,"sources":["file:///E:/education_game/game/assets/scripts/modules/game/game_objects/RightTriangleObject.ts"],"names":["_decorator","UITransform","Vec2","Utils","ObjectBase","ccclass","property","RightTriangleObject","setObject","objectType","shapeParam","objectParam","physicsParam","transformCpt","node","getComponent","addComponent","angle","setAnchorPoint","console","warn","_height","height","_angle","length","Math","tan","vertices","mObjectParam","name","phyGroup","isStatic","lineWidth","lineColor","str2color","fillColor","tipsData","tipContent","setTipData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;AAC3BC,MAAAA,K;;AAEEC,MAAAA,U,iBAAAA,U;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;qCAGjBO,mB,WADZF,OAAO,CAAC,qBAAD,C,gBAAR,MACaE,mBADb;AAAA;AAAA,oCACoD;AAIzCC,QAAAA,SAAS,CAACC,UAAD,EAAyBC,UAAzB,EAA0CC,WAA1C,EAA4DC,YAA5D,EAA8F;AAC1G,cAAIC,YAAY,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBd,WAAvB,CAAnB;;AACA,cAAI,CAACY,YAAL,EAAmB;AACfA,YAAAA,YAAY,GAAG,KAAKC,IAAL,CAAUE,YAAV,CAAuBf,WAAvB,CAAf;AACH;;AACD,cAAIS,UAAU,CAACO,KAAX,GAAmB,CAAnB,IAAwBP,UAAU,CAACO,KAAX,GAAmB,CAAC,EAAhD,EAAoD;AAChDJ,YAAAA,YAAY,CAACK,cAAb,CAA4B,CAA5B,EAA+B,CAA/B;AACH,WAFD,MAGK,IAAIR,UAAU,CAACO,KAAX,GAAmB,CAAnB,IAAwBP,UAAU,CAACO,KAAX,GAAmB,EAA/C,EAAmD;AACpDJ,YAAAA,YAAY,CAACK,cAAb,CAA4B,CAA5B,EAA+B,CAA/B;AACH,WAFI,MAGA;AACDC,YAAAA,OAAO,CAACC,IAAR,CAAa,yBAAb;AACA;AACH;;AACD,eAAKC,OAAL,GAAeX,UAAU,CAACY,MAA1B;AACA,eAAKC,MAAL,GAAcb,UAAU,CAACO,KAAzB;AACA,cAAIO,MAAM,GAAG,CAAC,KAAKH,OAAN,GAAgBI,IAAI,CAACC,GAAL,CAAS,KAAKH,MAAL,GAAc,EAAd,GAAmB,CAA5B,CAA7B;AACA,cAAII,QAAgB,GAAG,CACnB,IAAIzB,IAAJ,CAAS,CAAT,EAAY,CAAZ,CADmB,EAEnB,IAAIA,IAAJ,CAASsB,MAAT,EAAiB,CAAjB,CAFmB,EAGnB,IAAItB,IAAJ,CAAS,CAAT,EAAY,KAAKmB,OAAjB,CAHmB,CAAvB;AAKA,cAAIO,YAAyB,GAAG;AAC5BC,YAAAA,IAAI,EAAElB,WAAW,CAACkB,IADU;AAE5BC,YAAAA,QAAQ,EAAEnB,WAAW,CAACmB,QAFM;AAG5BC,YAAAA,QAAQ,EAAEpB,WAAW,CAACoB,QAAZ,IAAwB,CAHN;AAI5BC,YAAAA,SAAS,EAAErB,WAAW,CAACqB,SAJK;AAK5BC,YAAAA,SAAS,EAAE;AAAA;AAAA,gCAAMC,SAAN,CAAgBvB,WAAW,CAACsB,SAA5B,CALiB;AAM5BE,YAAAA,SAAS,EAAE;AAAA;AAAA,gCAAMD,SAAN,CAAgBvB,WAAW,CAACwB,SAA5B;AANiB,WAAhC;AAQA,gBAAM3B,SAAN,CAAgBC,UAAhB,EAA4BkB,QAA5B,EAAsCC,YAAtC,EAAoDhB,YAApD;AACA,cAAIwB,QAAuB,GAAG,CAC1B;AACIC,YAAAA,UAAU,EAAE,SAAS,KAAKhB;AAD9B,WAD0B,EAI1B;AACIgB,YAAAA,UAAU,EAAE,UAAU,KAAKd;AAD/B,WAJ0B,CAA9B;AAQA,eAAKe,UAAL,CAAgBF,QAAhB;AACH;;AA7C+C,O","sourcesContent":["import { _decorator, UITransform, Vec2 } from \"cc\";\nimport Utils from \"../../../utils/Utils\";\nimport { GameTipData } from \"../../ui/game_tip/GameTipItem\";\nimport { ObjectBase, ObjectParam, PhysicsParam } from \"../ObjectBase\";\nimport { ObjectType } from \"../ObjectFactory\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('RightTriangleObject')\nexport class RightTriangleObject extends ObjectBase {\n    protected _height: number;\n    protected _angle: number;\n\n    public setObject(objectType: ObjectType, shapeParam: any, objectParam: any, physicsParam: PhysicsParam): void {\n        let transformCpt = this.node.getComponent(UITransform);\n        if (!transformCpt) {\n            transformCpt = this.node.addComponent(UITransform);\n        }\n        if (shapeParam.angle < 0 && shapeParam.angle > -90) {\n            transformCpt.setAnchorPoint(1, 0);\n        }\n        else if (shapeParam.angle > 0 && shapeParam.angle < 90) {\n            transformCpt.setAnchorPoint(0, 0);\n        }\n        else {\n            console.warn(\"创建三角形时，角度必须在-90~90并且不为0\");\n            return;\n        }\n        this._height = shapeParam.height;\n        this._angle = shapeParam.angle;\n        let length = -this._height * Math.tan(this._angle / 18 * 5);\n        let vertices: Vec2[] = [\n            new Vec2(0, 0),\n            new Vec2(length, 0),\n            new Vec2(0, this._height),\n        ]\n        let mObjectParam: ObjectParam = {\n            name: objectParam.name,\n            phyGroup: objectParam.phyGroup,\n            isStatic: objectParam.isStatic == 1,\n            lineWidth: objectParam.lineWidth,\n            lineColor: Utils.str2color(objectParam.lineColor),\n            fillColor: Utils.str2color(objectParam.fillColor),\n        }\n        super.setObject(objectType, vertices, mObjectParam, physicsParam);\n        let tipsData: GameTipData[] = [\n            {\n                tipContent: \"高度为：\" + this._height,\n            },\n            {\n                tipContent: \"倾斜角为：\" + this._angle,\n            }\n        ]\n        this.setTipData(tipsData);\n    }\n}\n\n\n"]}