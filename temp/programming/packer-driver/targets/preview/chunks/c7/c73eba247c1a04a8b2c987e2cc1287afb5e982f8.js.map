{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/common/ComponentHelper.ts"],"names":["ComponentHelper","Label","Layers","Mask","Node","ScrollView","Sprite","UIOpacity","UITransform","PREVIEW","ComButton","ComButtonEnum","ComScrollContent","ComScrollContent2","ComScrollEnum","ComScrollView","CusMaterial","GroupLayer","Singleton","TextureManager","newUINode","name","width","height","anchorX","anchorY","node","layer","Enum","UI_2D","uiTransformComp","addComponent","newSprite","opacity","sprite","undefined","setSpriteOpacity","new3dSprite","SCENE3D","material","getMaterial","destroy","getMaterialByUrl","SPRITE","setMaterial","newComScrollView","param","scrollViewComp","comScrollViewComp","allowUnlimitedItemSize","nodeView","addChild","content","comScrollContentComp","maxCount","setMaxCount","init","setAllowDropToOutside","allowDropToOutside","allowScroll","setCanScroll","mode","Mode","GRID","setMode","VERTICAL","setPreItemSize","itemWidth","itemHeight","prefab","className","cls","setPreItem","itemPadding","paddingTop","paddingBottom","paddingLeft","paddingRight","spacingX","spacingY","newLabel","label","fontSize","useDefaultFnt","lineHeight","color","font","getDefaultBMPFont","useDefaultTtf","getTTFont","newComButton","console","error","getComponent","log","isNewComp","comp","transition","Transition","NONE","addClickFunc","clickFunc","setNodeOpactiy","warn","opacityComp","set","r","g","b","setButtonEnable","target","val","combutton","interactable"],"mappings":"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","sourcesContent":["/// 组件相关的操作 比如生成 部分方法只是过渡方案 请谨慎使用\r\n\r\nimport { Color, computeRatioByType, Label, Layers, log, Mask, Node, Prefab, ScrollView, Sprite, UIOpacity, UITransform, Vec3 } from \"cc\";\r\nimport { PREVIEW } from \"cc/env\";\r\nimport { ComButton } from \"ComButton\";\r\nimport { ComButtonEnum } from \"ComButtonEnum\";\r\nimport { ComScrollContent } from \"ComScrollContent\";\r\nimport { ComScrollContent2 } from \"ComScrollContent2\";\r\nimport { ComScrollEnum } from \"ComScrollEnum\";\r\nimport { ComScrollView } from \"ComScrollView\";\r\nimport { CusMaterial, GroupLayer } from \"GlobalHelper\";\r\nimport { Singleton } from \"Singleton\";\r\nimport TextureManager from \"TextureManager\";\r\n\r\n//#region 接口\r\n\r\n/** 自定义滚动容器 */\r\ninterface INewComScrollViewParam {\r\n    /** 容器宽度 */\r\n    width: number\r\n    /** 容器高度 */\r\n    height: number\r\n    /** 布局方向 */\r\n    mode: ComScrollEnum.Mode,\r\n    /** 预制体 */\r\n    prefab?: Prefab\r\n    /** 类名 */\r\n    className?: string\r\n    /** 最多可展示的节点数 */\r\n    maxCount?: number\r\n    /** 外间距（最外层元素和外边框的间隔） 请按照上下左右的索引顺序填写 */\r\n    itemPadding?: number[]\r\n    /** X轴节点间的间距（内层元素之间的间隔） */\r\n    spacingX?: number\r\n    /** Y轴节点间的间距（内层元素之间的间隔） */\r\n    spacingY?: number\r\n    /** 子节点的宽度 */\r\n    itemWidth?: number\r\n    /** 子节点的高度 */\r\n    itemHeight?: number\r\n    /** 类实例 */\r\n    cls?: any\r\n    /** 是否需要支持大小不一或动态大小的子节点 开启该参数会增加性能消耗（可能没多少） */\r\n    allowUnlimitedItemSize?: boolean\r\n    /** 是否允许滚动内容超过边界 默认不允许 */\r\n    allowDropToOutside?: boolean\r\n    /** 是否允许滚动 */\r\n    allowScroll?: boolean\r\n}\r\n\r\ninterface INewGUITextParam {\r\n    /** 字体大小 */\r\n    fontSize?: number\r\n    /** 字体颜色 */\r\n    color?: Color\r\n    /** 使用默认Fnt */\r\n    useDefaultFnt?: boolean,\r\n    /** 使用默认ttf */\r\n    useDefaultTtf?: boolean\r\n}\r\n\r\n/** 自定义按钮 */\r\ninterface INewComButtonParam {\r\n    /** 节点 */\r\n    node: Node,\r\n    /** 初始化参数 */\r\n    param?: INewComButtonPExt,\r\n    /** 触发方法 */\r\n    clickFunc?: (event: TouchEvent) => void,\r\n}\r\n\r\n\r\nexport interface INewComButtonPExt {\r\n    /**设为true 将会响应所有的触摸事件，包括end move cancel */\r\n    isBCE?: boolean,\r\n    /**触摸类型，可用 Node.EventType */\r\n    touchType?: string,\r\n    isAnim?: boolean,\r\n    resumeScale?: number,\r\n    smallScale?: number,\r\n    clickCDTime?: number,\r\n    soundId?: number,\r\n    needShowCDTips?: string,\r\n    /**是否允许点击穿透 加了这个以后，再加上isBCE true和收到事件的时候event.preventSwallow = true 才能成功穿透scview。不穿透scview可以不用这个字段*/\r\n    canPenetrate?: boolean,\r\n\r\n}\r\n\r\n\r\n//#endregion\r\n\r\nexport class ComponentHelper extends Singleton {\r\n    //#region 生成并返回指定组件方法\r\n\r\n    /**\r\n     * 生成并返回适用于Canvas的Node节点\r\n     * @param name \r\n     * @param width\r\n     * @param height\r\n     * @param anchorX\r\n     * @param anchorY\r\n     * @returns \r\n     */\r\n    newUINode(name: string = \"UINode\", width: number = 100, height: number = 100, anchorX = 0.5, anchorY = 0.5) {\r\n        let node = new Node(name)\r\n        node.layer = Layers.Enum.UI_2D\r\n\r\n        let uiTransformComp = node.addComponent(UITransform)\r\n        uiTransformComp.width = width\r\n        uiTransformComp.height = height\r\n        uiTransformComp.anchorX = anchorX\r\n        uiTransformComp.anchorY = anchorY\r\n\r\n        return node\r\n    }\r\n\r\n    /**\r\n     * 生成并返回Sprite组件\r\n     * @param name 节点名\r\n     * @param opacity 透明度 默认为255\r\n     * @returns \r\n     */\r\n    newSprite(name: string = \"Sprite\", opacity?: number): Sprite {\r\n        let node = this.newUINode(name)\r\n        node.layer = Layers.Enum.UI_2D\r\n        let sprite = node.addComponent(Sprite)\r\n        if (opacity != undefined) {\r\n            this.setSpriteOpacity(sprite, opacity)\r\n        }\r\n        return sprite\r\n    }\r\n\r\n    /**\r\n     * 生成并返回3d版本Sprite组件 待完善\r\n     * @param name \r\n     * @returns \r\n     */\r\n    new3dSprite(name: string = \"3dSprite\"): Sprite {\r\n        let node = new Node(name)\r\n        node.layer = GroupLayer.SCENE3D // 不知道具体作用\r\n        // node.layer = Layers.Enum.UI_3D\r\n        node.addComponent(UITransform)\r\n        let sprite = node.addComponent(Sprite)\r\n        let material = sprite.getMaterial(0)\r\n        if (material) {\r\n            material.destroy()\r\n        }\r\n        material = TextureManager.getMaterialByUrl(CusMaterial.SPRITE); // 不知道具体作用\r\n        sprite.setMaterial(material, 0);\r\n        return sprite\r\n    }\r\n\r\n    /**\r\n     * 警告：该方法已被遗弃，并将于未来被删除 生成并返回ComScrollView组件 这只是一个过渡处理方案 建议直接在节点中添加该组件并设置属性\r\n     * @param param \r\n     * \r\n     * @returns \r\n     */\r\n    newComScrollView(param: INewComScrollViewParam) {\r\n        let width = param.width || 500\r\n        let height = param.height || 500\r\n\r\n        // ScrollView节点\r\n        let node = this.newUINode(\"ScrollView\", width, height)\r\n        let scrollViewComp = node.addComponent(ScrollView)\r\n        let comScrollViewComp = node.addComponent(ComScrollView)\r\n        comScrollViewComp.allowUnlimitedItemSize = param.allowUnlimitedItemSize\r\n\r\n        // View节点\r\n        let nodeView = this.newUINode(\"View\", width, height)\r\n        node.addChild(nodeView)\r\n        nodeView.addComponent(Mask)\r\n\r\n        // Content节点\r\n        let content = this.newUINode(\"content\", width, height)\r\n        nodeView.addChild(content)\r\n        let comScrollContentComp: ComScrollContent | ComScrollContent2\r\n        if (param.allowUnlimitedItemSize) {\r\n            comScrollContentComp = content.addComponent(ComScrollContent2)\r\n        } else {\r\n            comScrollContentComp = content.addComponent(ComScrollContent)\r\n        }\r\n        if (param.maxCount != undefined) {\r\n            comScrollContentComp.setMaxCount(param.maxCount)\r\n        }\r\n\r\n        // 初始化数据\r\n        scrollViewComp.content = content\r\n        comScrollViewComp.init()\r\n        comScrollViewComp.setAllowDropToOutside(param.allowDropToOutside)\r\n        if (param.allowScroll != undefined) {\r\n            comScrollViewComp.setCanScroll(param.allowScroll)\r\n        }\r\n        if (param.mode != undefined) {\r\n            if (param.mode == ComScrollEnum.Mode.GRID && param.allowUnlimitedItemSize) {\r\n                comScrollViewComp.setMode(ComScrollEnum.Mode.VERTICAL)\r\n            } else {\r\n                comScrollViewComp.setMode(param.mode)\r\n            }\r\n        }\r\n        if (!param.allowUnlimitedItemSize) {\r\n            (comScrollContentComp as ComScrollContent).setPreItemSize(param.itemWidth, param.itemHeight)\r\n        }\r\n\r\n        if (param.prefab || param.className || param.cls) {\r\n            comScrollViewComp.setPreItem(param.prefab, param.className, param.cls)\r\n        }\r\n        if (param.itemPadding) {\r\n            comScrollContentComp.paddingTop = param.itemPadding[0] || 0\r\n            comScrollContentComp.paddingBottom = param.itemPadding[1] || 0\r\n            comScrollContentComp.paddingLeft = param.itemPadding[2] || 0\r\n            comScrollContentComp.paddingRight = param.itemPadding[3] || 0\r\n        }\r\n        comScrollContentComp.spacingX = param.spacingX || 0\r\n        comScrollContentComp.spacingY = param.spacingY || 0\r\n\r\n        return comScrollViewComp\r\n    }\r\n\r\n    /**\r\n     * 生成并返回Label 这这是一个过渡方案 后续看看有没有必要保留该方法\r\n     * @param name \r\n     * @param fontSize \r\n     * @param color \r\n     * @returns \r\n     */\r\n    newLabel(name: string = \"Label\", param?: INewGUITextParam): Label {\r\n        let node = this.newUINode(name)\r\n        let label = node.addComponent(Label)\r\n\r\n        if (param) {\r\n            if (param.fontSize != undefined) {\r\n                label.fontSize = param.fontSize\r\n                if (param && param.useDefaultFnt) {\r\n                    label.lineHeight = param.fontSize + 6\r\n                } else {\r\n                    label.lineHeight = param.fontSize + 4\r\n                }\r\n            }\r\n            if (param.color) {\r\n                label.color = param.color\r\n            }\r\n\r\n            if (param.useDefaultFnt) {\r\n                label.font = TextureManager.getDefaultBMPFont()\r\n                label.spacingX = 5\r\n            } else if (param.useDefaultTtf) {\r\n                label.font = TextureManager.getTTFont()\r\n            }\r\n        }\r\n\r\n        return label\r\n    }\r\n\r\n    /**\r\n     * 生成并返回ComButton组件 这只是一个过渡处理方案 建议直接在节点中添加该组件并设置属性\r\n     * @param param \r\n     * @returns \r\n     */\r\n    newComButton(param: INewComButtonParam) {\r\n        let node = param.node\r\n        if (!node) {\r\n            console.error(\"newComButton执行失败 待绑定节点为空\")\r\n            return\r\n        }\r\n\r\n        // 该组件需要UITransform组件支持 故需要判断节点上是否有 没有则主动创建\r\n        if (!node.getComponent(UITransform)) {\r\n            if (PREVIEW) {\r\n                console.log(`节点(${node.name})上不存在UITransform组件 为其主动挂上`)\r\n            }\r\n            node.addComponent(UITransform)\r\n        }\r\n        // 是否是新创建的组件 如果通过代码形式创建ComButton 则默认无transition\r\n        let isNewComp = false\r\n\r\n        let comp = node.getComponent(ComButton)\r\n        if (!comp) {\r\n            isNewComp = true\r\n            comp = node.addComponent(ComButton)\r\n        }\r\n        if (param.param) {\r\n            comp.init(param.param)\r\n        } else if (isNewComp) {\r\n            comp.transition = ComButtonEnum.Transition.NONE\r\n        }\r\n        comp.addClickFunc(param.clickFunc)\r\n\r\n        return comp\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region 设组件透明度\r\n\r\n    /**\r\n     * 设置节点的透明度\r\n     * @param node \r\n     * @param opacity \r\n     * @returns \r\n     */\r\n    setNodeOpactiy(node: Node, opacity: number) {\r\n        if (!node) {\r\n            console.warn(\"setNodeOpactiy FAIL node unvalid\")\r\n            return\r\n        }\r\n        // 编辑器下对部分组件不生效（如skeleton组件）\r\n        let opacityComp = node.getComponent(UIOpacity)\r\n        if (!opacityComp) {\r\n            if (opacity == 255) {\r\n                return\r\n            }\r\n            opacityComp = node.addComponent(UIOpacity)\r\n        }\r\n\r\n        opacityComp.opacity = opacity\r\n    }\r\n\r\n    /**\r\n     * 设置Sprite组件的透明度\r\n     * @param sprite \r\n     * @param opacity \r\n     */\r\n    setSpriteOpacity(sprite: Sprite, opacity) {\r\n        let color = sprite.color\r\n        color.set(color.r, color.g, color.b, opacity)\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 设置按钮是否可以交互\r\n     * @param target \r\n     * @param val \r\n     */\r\n    setButtonEnable(target: Node, val: boolean) {\r\n        let combutton = target.getComponent(ComButton)\r\n        if (combutton) {\r\n            combutton.interactable = val\r\n        }\r\n    }\r\n\r\n\r\n    //#endregion\r\n}"]}