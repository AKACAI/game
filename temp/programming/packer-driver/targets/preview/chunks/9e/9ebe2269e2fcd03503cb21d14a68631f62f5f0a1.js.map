{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/modules/game/game_objects/RightTriangleObject.ts"],"names":["_decorator","UITransform","Vec2","Utils","ObjectBase","ccclass","property","RightTriangleObject","init","objectType","shapeParam","objectParam","transformCpt","node","addComponent","angle","setAnchorPoint","console","warn","_height","height","_angle","angleAbs","Math","abs","length","tan","vertices","mObjectParam","name","phyGroup","isStatic","lineWidth","lineColor","str2color","fillColor","tipsData","tipContent","setTipData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,I,OAAAA,I;;AAC3BC,MAAAA,K;;AAEEC,MAAAA,U,iBAAAA,U;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;qCAGjBO,mB,WADZF,OAAO,CAAC,qBAAD,C,gBAAR,MACaE,mBADb;AAAA;AAAA,oCACoD;AAIzCC,QAAAA,IAAI,CAACC,UAAD,EAAyBC,UAAzB,EAA0CC,WAA1C,EAAkE;AACzE;AACA,cAAIC,YAAY,GAAG,KAAKC,IAAL,CAAUC,YAAV,CAAuBb,WAAvB,CAAnB;;AACA,cAAIS,UAAU,CAACK,KAAX,GAAmB,CAAnB,IAAwBL,UAAU,CAACK,KAAX,GAAmB,CAAC,EAAhD,EAAoD;AAChDH,YAAAA,YAAY,CAACI,cAAb,CAA4B,CAA5B,EAA+B,CAA/B;AACH,WAFD,MAGK,IAAIN,UAAU,CAACK,KAAX,GAAmB,CAAnB,IAAwBL,UAAU,CAACK,KAAX,GAAmB,EAA/C,EAAmD;AACpDH,YAAAA,YAAY,CAACI,cAAb,CAA4B,CAA5B,EAA+B,CAA/B;AACH,WAFI,MAGA;AACDC,YAAAA,OAAO,CAACC,IAAR,CAAa,yBAAb;AACA;AACH;;AACD,eAAKC,OAAL,GAAeT,UAAU,CAACU,MAA1B;AACA,eAAKC,MAAL,GAAcX,UAAU,CAACK,KAAzB;AACA,cAAIO,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAAS,KAAKH,MAAd,CAAf;AACA,cAAII,MAAJ;;AACA,cAAI,KAAKJ,MAAL,GAAc,CAAlB,EAAqB;AACjBI,YAAAA,MAAM,GAAG,CAAC,KAAKN,OAAN,GAAgBI,IAAI,CAACG,GAAL,CAASJ,QAAQ,GAAG,EAAX,GAAgB,CAAzB,CAAzB;AACH,WAFD,MAGK;AACDG,YAAAA,MAAM,GAAG,KAAKN,OAAL,GAAeI,IAAI,CAACG,GAAL,CAASJ,QAAQ,GAAG,EAAX,GAAgB,CAAzB,CAAxB;AACH;;AACD,cAAIK,QAAgB,GAAG,CACnB,IAAIzB,IAAJ,CAAS,CAAT,EAAY,CAAZ,CADmB,EAEnB,IAAIA,IAAJ,CAASuB,MAAT,EAAiB,CAAjB,CAFmB,EAGnB,IAAIvB,IAAJ,CAAS,CAAT,EAAY,KAAKiB,OAAjB,CAHmB,CAAvB;AAKA,cAAIS,YAAyB,GAAG;AAC5BC,YAAAA,IAAI,EAAElB,WAAW,CAACkB,IADU;AAE5BC,YAAAA,QAAQ,EAAEnB,WAAW,CAACmB,QAFM;AAG5BC,YAAAA,QAAQ,EAAEpB,WAAW,CAACoB,QAAZ,IAAwB,CAHN;AAI5BC,YAAAA,SAAS,EAAErB,WAAW,CAACqB,SAJK;AAK5BC,YAAAA,SAAS,EAAE;AAAA;AAAA,gCAAMC,SAAN,CAAgBvB,WAAW,CAACsB,SAA5B,CALiB;AAM5BE,YAAAA,SAAS,EAAE;AAAA;AAAA,gCAAMD,SAAN,CAAgBvB,WAAW,CAACwB,SAA5B;AANiB,WAAhC;AAQA,gBAAM3B,IAAN,CAAWC,UAAX,EAAuBkB,QAAvB,EAAiCC,YAAjC;AACA,cAAIQ,QAAuB,GAAG,CAC1B;AACIC,YAAAA,UAAU,EAAE,SAAS,KAAKlB;AAD9B,WAD0B,EAI1B;AACIkB,YAAAA,UAAU,EAAE,UAAU,KAAKhB;AAD/B,WAJ0B,CAA9B;AAQA,eAAKiB,UAAL,CAAgBF,QAAhB;AACH;;AAlD+C,O","sourcesContent":["import { _decorator, UITransform, Vec2 } from \"cc\";\r\nimport Utils from \"../../../utils/Utils\";\r\nimport { GameTipData } from \"../../ui/game_tip/GameTipItem\";\r\nimport { ObjectBase, ObjectParam } from \"../ObjectBase\";\r\nimport { ObjectType } from \"../ObjectFactory\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('RightTriangleObject')\r\nexport class RightTriangleObject extends ObjectBase {\r\n    protected _height: number;\r\n    protected _angle: number;\r\n\r\n    public init(objectType: ObjectType, shapeParam: any, objectParam: any): void {\r\n        // TODO 三个点的计算应该有问题\r\n        let transformCpt = this.node.addComponent(UITransform);\r\n        if (shapeParam.angle < 0 && shapeParam.angle > -90) {\r\n            transformCpt.setAnchorPoint(1, 0);\r\n        }\r\n        else if (shapeParam.angle > 0 && shapeParam.angle < 90) {\r\n            transformCpt.setAnchorPoint(0, 0);\r\n        }\r\n        else {\r\n            console.warn(\"创建三角形时，角度必须在-90~90并且不为0\");\r\n            return;\r\n        }\r\n        this._height = shapeParam.height;\r\n        this._angle = shapeParam.angle;\r\n        let angleAbs = Math.abs(this._angle);\r\n        let length;\r\n        if (this._angle < 0) {\r\n            length = -this._height / Math.tan(angleAbs / 18 * 5);\r\n        }\r\n        else {\r\n            length = this._height / Math.tan(angleAbs / 18 * 5);\r\n        }\r\n        let vertices: Vec2[] = [\r\n            new Vec2(0, 0),\r\n            new Vec2(length, 0),\r\n            new Vec2(0, this._height),\r\n        ]\r\n        let mObjectParam: ObjectParam = {\r\n            name: objectParam.name,\r\n            phyGroup: objectParam.phyGroup,\r\n            isStatic: objectParam.isStatic == 1,\r\n            lineWidth: objectParam.lineWidth,\r\n            lineColor: Utils.str2color(objectParam.lineColor),\r\n            fillColor: Utils.str2color(objectParam.fillColor),\r\n        }\r\n        super.init(objectType, vertices, mObjectParam);\r\n        let tipsData: GameTipData[] = [\r\n            {\r\n                tipContent: \"高度为：\" + this._height,\r\n            },\r\n            {\r\n                tipContent: \"倾斜角为：\" + this._angle,\r\n            }\r\n        ]\r\n        this.setTipData(tipsData);\r\n    }\r\n}\r\n\r\n\r\n"]}