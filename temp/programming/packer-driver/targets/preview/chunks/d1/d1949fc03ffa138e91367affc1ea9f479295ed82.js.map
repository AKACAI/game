{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/modules/ui/game_panel/GamePanel.ts"],"names":["_decorator","Node","UILayer","UIPanel","ResDestroyType","GameToolsView","GridSquare","ccclass","property","GamePanel","isMouseDown","init","_layer","game","_resDestroyType","directlyRelease","factorySpace","node","getChildByName","gridSquare","getComponent","game_tools_cv","nums","num","setData","bindFunc","on","EventType","MOUSE_WHEEL","onMouseWheel","MOUSE_MOVE","onMouseMove","MOUSE_DOWN","MOUSE_UP","open","event","scrollY","getScrollY","zoomIn","zoomOut","moveVec","getDelta","move","close","dispose"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAwBC,MAAAA,I,OAAAA,I;;AACxBC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,O,iBAAAA,O;AAASC,MAAAA,c,iBAAAA,c;;AACTC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;2BAGjBS,S,WADZF,OAAO,CAAC,WAAD,C,gBAAR,MACaE,SADb;AAAA;AAAA,8BACuC;AAAA;AAAA;AAAA,eAK3BC,WAL2B,GAKJ,KALI;AAAA;;AAO5BC,QAAAA,IAAI,GAAG;AACV,eAAKC,MAAL,GAAc;AAAA;AAAA,kCAAQC,IAAtB;AACA,eAAKC,eAAL,GAAuB;AAAA;AAAA,gDAAeC,eAAtC;AAEA,eAAKC,YAAL,GAAoB,KAAKC,IAAL,CAAUC,cAAV,CAAyB,eAAzB,CAApB;AACA,eAAKC,UAAL,GAAkB,KAAKH,YAAL,CAAkBE,cAAlB,CAAiC,aAAjC,EAAgDE,YAAhD;AAAA;AAAA,uCAAlB;AACA,eAAKC,aAAL,GAAqB,KAAKJ,IAAL,CAAUC,cAAV,CAAyB,iBAAzB,EAA4CE,YAA5C;AAAA;AAAA,6CAArB;AACA,eAAKD,UAAL,CAAgBR,IAAhB;AACA,eAAKU,aAAL,CAAmBV,IAAnB;AACA,cAAIW,IAAuB,GAAG,CAC1B;AAAEC,YAAAA,GAAG,EAAE;AAAP,WAD0B,EAE1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAF0B,EAG1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAH0B,EAI1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAJ0B,EAK1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAL0B,EAM1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAN0B,EAO1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAP0B,EAQ1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAR0B,EAS1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAT0B,EAU1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAV0B,EAW1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAX0B,EAY1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAZ0B,EAa1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAb0B,EAc1B;AAAEA,YAAAA,GAAG,EAAE;AAAP,WAd0B,CAA9B;AAgBA,eAAKF,aAAL,CAAmBG,OAAnB,CAA2BF,IAA3B;AACA,eAAKZ,WAAL,GAAmB,KAAnB;AACH;;AAEMe,QAAAA,QAAQ,GAAG;AACd,eAAKT,YAAL,CAAkBU,EAAlB,CAAqBzB,IAAI,CAAC0B,SAAL,CAAeC,WAApC,EAAiD,KAAKC,YAAtD,EAAoE,IAApE;AACA,eAAKb,YAAL,CAAkBU,EAAlB,CAAqBzB,IAAI,CAAC0B,SAAL,CAAeG,UAApC,EAAgD,KAAKC,WAArD,EAAkE,IAAlE;AACA,eAAKf,YAAL,CAAkBU,EAAlB,CAAqBzB,IAAI,CAAC0B,SAAL,CAAeK,UAApC,EAAgD,MAAM;AAClD,iBAAKtB,WAAL,GAAmB,IAAnB;AACH,WAFD,EAEG,IAFH;AAGA,eAAKM,YAAL,CAAkBU,EAAlB,CAAqBzB,IAAI,CAAC0B,SAAL,CAAeM,QAApC,EAA8C,MAAM;AAChD,iBAAKvB,WAAL,GAAmB,KAAnB;AACH,WAFD,EAEG,IAFH;AAGH;;AAGMwB,QAAAA,IAAI,GAAG;AACV,gBAAMA,IAAN;AACH;;AAEOL,QAAAA,YAAY,CAACM,KAAD,EAAoB;AACpC,cAAIC,OAAO,GAAGD,KAAK,CAACE,UAAN,EAAd;;AACA,cAAID,OAAO,GAAG,CAAd,EAAiB;AACb,iBAAKjB,UAAL,CAAgBmB,MAAhB;AACH,WAFD,MAGK,IAAIF,OAAO,GAAG,CAAd,EAAiB;AAClB,iBAAKjB,UAAL,CAAgBoB,OAAhB;AACH;AACJ;;AAEOR,QAAAA,WAAW,CAACI,KAAD,EAAoB;AACnC,cAAI,KAAKzB,WAAT,EAAsB;AAClB,gBAAI8B,OAAO,GAAGL,KAAK,CAACM,QAAN,EAAd;AACA,iBAAKtB,UAAL,CAAgBuB,IAAhB,CAAqBF,OAArB;AACH;AACJ;;AAEMG,QAAAA,KAAK,GAAG;AACX,gBAAMA,KAAN;AACH;;AAEMC,QAAAA,OAAO,GAAG;AACb,eAAKvB,aAAL,CAAmBuB,OAAnB;AACH;;AA3EkC,O","sourcesContent":["import { _decorator, EventMouse, Node } from \"cc\";\r\nimport { UILayer } from \"../../../manager/ui_manager/UIManager\";\r\nimport { UIPanel, ResDestroyType } from \"../../../manager/ui_manager/UIPanel\";\r\nimport { GameToolsView } from \"./GameToolsView\";\r\nimport { GridSquare } from \"./GridSquare\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('GamePanel')\r\nexport class GamePanel extends UIPanel {\r\n    private factorySpace: Node;\r\n    private gridSquare: GridSquare;\r\n    private game_tools_cv: GameToolsView;\r\n\r\n    private isMouseDown: boolean = false;\r\n\r\n    public init() {\r\n        this._layer = UILayer.game;\r\n        this._resDestroyType = ResDestroyType.directlyRelease;\r\n\r\n        this.factorySpace = this.node.getChildByName(\"factory_space\");\r\n        this.gridSquare = this.factorySpace.getChildByName(\"grid_square\").getComponent(GridSquare);\r\n        this.game_tools_cv = this.node.getChildByName(\"game_tools_view\").getComponent(GameToolsView);\r\n        this.gridSquare.init();\r\n        this.game_tools_cv.init();\r\n        let nums: { num: number }[] = [\r\n            { num: 1 },\r\n            { num: 2 },\r\n            { num: 3 },\r\n            { num: 1 },\r\n            { num: 6 },\r\n            { num: 7 },\r\n            { num: 1 },\r\n            { num: 1 },\r\n            { num: 2 },\r\n            { num: 3 },\r\n            { num: 1 },\r\n            { num: 6 },\r\n            { num: 7 },\r\n            { num: 1 },\r\n        ]\r\n        this.game_tools_cv.setData(nums);\r\n        this.isMouseDown = false;\r\n    }\r\n\r\n    public bindFunc() {\r\n        this.factorySpace.on(Node.EventType.MOUSE_WHEEL, this.onMouseWheel, this);\r\n        this.factorySpace.on(Node.EventType.MOUSE_MOVE, this.onMouseMove, this);\r\n        this.factorySpace.on(Node.EventType.MOUSE_DOWN, () => {\r\n            this.isMouseDown = true;\r\n        }, this);\r\n        this.factorySpace.on(Node.EventType.MOUSE_UP, () => {\r\n            this.isMouseDown = false;\r\n        }, this);\r\n    }\r\n\r\n\r\n    public open() {\r\n        super.open();\r\n    }\r\n\r\n    private onMouseWheel(event: EventMouse) {\r\n        let scrollY = event.getScrollY();\r\n        if (scrollY > 0) {\r\n            this.gridSquare.zoomIn();\r\n        }\r\n        else if (scrollY < 0) {\r\n            this.gridSquare.zoomOut();\r\n        }\r\n    }\r\n\r\n    private onMouseMove(event: EventMouse) {\r\n        if (this.isMouseDown) {\r\n            let moveVec = event.getDelta();\r\n            this.gridSquare.move(moveVec);\r\n        }\r\n    }\r\n\r\n    public close() {\r\n        super.close();\r\n    }\r\n\r\n    public dispose() {\r\n        this.game_tools_cv.dispose();\r\n    }\r\n}\r\n\r\n\r\n"]}