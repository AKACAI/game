{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/manager/game_manager/InteractManager.ts"],"names":["_decorator","ccclass","property","InteractManager","constructor","gameManager","_gameManager","undefined","_curDetectObjects","interactWithObject","object","mouseParam","interactSpace","getInteractSpace","isMouseIn","contains","mousePos","lastDetectIndex","findIndex","item","getObjectInfo","id","onMouseEnterSpace","push","onMouseLeaveSpace","splice"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;;;;;;;;OAIH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBF,U;;iCAGjBG,e,WADZF,OAAO,CAAC,iBAAD,C,gBAAR,MACaE,eADb,CAC6B;AAEzB;AAGAC,QAAAA,WAAW,CAACC,WAAD,EAA2B;AAAA,eAJ9BC,YAI8B,GAJFC,SAIE;AAClC,eAAKD,YAAL,GAAoBD,WAApB;AACA,eAAKG,iBAAL,GAAyB,EAAzB;AACH;;AAEMC,QAAAA,kBAAkB,CAACC,MAAD,EAAqBC,UAArB,EAA6C;AAClE,cAAIC,aAAa,GAAGF,MAAM,CAACG,gBAAP,EAApB;;AACA,cAAID,aAAJ,EAAmB;AACf,gBAAME,SAAS,GAAGF,aAAa,CAACG,QAAd,CAAuBJ,UAAU,CAACK,QAAlC,CAAlB;;AACA,gBAAIC,eAAe,GAAG,KAAKT,iBAAL,CAAuBU,SAAvB,CAAkCC,IAAD,IAAU;AAC7D,kBAAIT,MAAM,CAACU,aAAP,GAAuBC,EAAvB,IAA6BF,IAAI,CAACC,aAAL,GAAqBC,EAAtD,EAA0D;AACtD,uBAAO,IAAP;AACH;;AACD,qBAAO,KAAP;AACH,aALqB,CAAtB;;AAMA,gBAAIP,SAAJ,EAAe;AACX,kBAAIG,eAAe,IAAI,CAAvB,EAA0B,CAEzB,CAFD,MAEO;AACHL,gBAAAA,aAAa,CAACU,iBAAd,CAAgCX,UAAhC;;AACA,qBAAKH,iBAAL,CAAuBe,IAAvB,CAA4Bb,MAA5B;AACH;AACJ,aAPD,MAOO;AACH,kBAAIO,eAAe,IAAI,CAAvB,EAA0B;AACtBL,gBAAAA,aAAa,CAACY,iBAAd,CAAgCb,UAAhC;;AACA,qBAAKH,iBAAL,CAAuBiB,MAAvB,CAA8BR,eAA9B,EAA+C,CAA/C;AACH,eAHD,MAGO,CAEN;AACJ;AACJ;AAEJ;;AArCwB,O","sourcesContent":["import { _decorator, Component, Node, Vec2, Vec3 } from 'cc';\r\nimport { ObjectBase } from '../../modules/game/ObjectBase';\r\nimport { MouseParam } from '../InputManager';\r\nimport { GameManager } from './GameManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('InteractManager')\r\nexport class InteractManager {\r\n    private _gameManager: GameManager = undefined;\r\n    /** 当前鼠标检测到的物体 */\r\n    private _curDetectObjects: ObjectBase[];\r\n\r\n    constructor(gameManager: GameManager) {\r\n        this._gameManager = gameManager;\r\n        this._curDetectObjects = [];\r\n    }\r\n\r\n    public interactWithObject(object: ObjectBase, mouseParam: MouseParam) {\r\n        let interactSpace = object.getInteractSpace();\r\n        if (interactSpace) {\r\n            const isMouseIn = interactSpace.contains(mouseParam.mousePos);\r\n            let lastDetectIndex = this._curDetectObjects.findIndex((item) => {\r\n                if (object.getObjectInfo().id == item.getObjectInfo().id) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            });\r\n            if (isMouseIn) {\r\n                if (lastDetectIndex >= 0) {\r\n\r\n                } else {\r\n                    interactSpace.onMouseEnterSpace(mouseParam);\r\n                    this._curDetectObjects.push(object);\r\n                }\r\n            } else {\r\n                if (lastDetectIndex >= 0) {\r\n                    interactSpace.onMouseLeaveSpace(mouseParam);\r\n                    this._curDetectObjects.splice(lastDetectIndex, 1);\r\n                } else {\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n"]}