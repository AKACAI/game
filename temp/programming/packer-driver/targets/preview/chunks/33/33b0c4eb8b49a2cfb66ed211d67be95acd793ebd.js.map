{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/manager/map_manager/MapManager.ts"],"names":["_decorator","Singleton","ObjectFactory","Utils","GameManager","MapData","ccclass","property","MapManager","init","gameMgr","getInstance","map_root","gameRoot","getChildByName","enterMap","mapName","mapData","getMapData","i","objectDatas","length","data","object","getObject","objectType","shapeParam","str2vec3","pos","objectParam","addObject"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,a,iBAAAA,a;;AACFC,MAAAA,K;;AACEC,MAAAA,W,iBAAAA,W;;AACFC,MAAAA,O;;;;;;;;;OAED;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;4BAGjBQ,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb;AAAA;AAAA,kCAC0C;AAG/BC,QAAAA,IAAI,GAAG;AACV,eAAKC,OAAL,GAAe;AAAA;AAAA,0CAAYC,WAAZ,EAAf;AACA,eAAKC,QAAL,GAAgB,KAAKF,OAAL,CAAaG,QAAb,CAAsBC,cAAtB,CAAqC,UAArC,CAAhB;AACH;;AAEMC,QAAAA,QAAQ,CAACC,OAAD,EAAkB;AAC7B,cAAIC,OAAO,GAAG;AAAA;AAAA,kCAAQN,WAAR,GAAsBO,UAAtB,CAAiCF,OAAjC,CAAd;;AACA,eAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACG,WAAR,CAAoBC,MAAxC,EAAgDF,CAAC,EAAjD,EAAqD;AACjD,gBAAIG,IAAI,GAAGL,OAAO,CAACG,WAAR,CAAoBD,CAApB,CAAX;AACA,gBAAII,MAAM,GAAG;AAAA;AAAA,gDAAcZ,WAAd,GAA4Ba,SAA5B,CAAsCF,IAAI,CAACG,UAA3C,EAAuDH,IAAI,CAACI,UAA5D,EAAwE;AAAA;AAAA,gCAAMC,QAAN,CAAeL,IAAI,CAACM,GAApB,CAAxE,EAAkGN,IAAI,CAACO,WAAvG,EAAoH,KAAKjB,QAAzH,CAAb;AACA,iBAAKF,OAAL,CAAaoB,SAAb,CAAuBP,MAAvB;AACH;AACJ;;AAfqC,O","sourcesContent":["import { _decorator, Node } from \"cc\";\r\nimport { Singleton } from \"../../common/Singleton\";\r\nimport { ObjectFactory } from \"../../modules/game/ObjectFactory\";\r\nimport Utils from \"../../utils/Utils\";\r\nimport { GameManager } from \"../game_manager/GameManager\";\r\nimport MapData, { IOpenObjectData } from \"./MapData\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('MapManager')\r\nexport class MapManager extends Singleton {\r\n    private map_root: Node;\r\n    private gameMgr: GameManager;\r\n    public init() {\r\n        this.gameMgr = GameManager.getInstance();\r\n        this.map_root = this.gameMgr.gameRoot.getChildByName(\"map_root\");\r\n    }\r\n\r\n    public enterMap(mapName: string) {\r\n        let mapData = MapData.getInstance().getMapData(mapName);\r\n        for (let i = 0; i < mapData.objectDatas.length; i++) {\r\n            let data = mapData.objectDatas[i] as IOpenObjectData;\r\n            let object = ObjectFactory.getInstance().getObject(data.objectType, data.shapeParam, Utils.str2vec3(data.pos), data.objectParam, this.map_root);\r\n            this.gameMgr.addObject(object);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}