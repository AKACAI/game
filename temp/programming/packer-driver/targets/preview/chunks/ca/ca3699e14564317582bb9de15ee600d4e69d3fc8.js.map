{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/modules/ui/game_start_ui/LevelSelectModeItem.ts"],"names":["_decorator","Component","Sprite","NodeHelper","Utils","ccclass","property","LevelSelectModeItem","img_mode","undefined","lb_mode_name","img_state_mask","data","maxOpacity","init","node","getChildByName","active","changeMaskOpacity","addListener","setNodeClickEvent","clickCb","setData","setLabelString","name","setProgressOpacity","progress","opacity","clamp","opacityCpt","getComponent","color","a","dispose"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAmBC,MAAAA,S,OAAAA,S;AAAsCC,MAAAA,M,OAAAA,M;;AAC3DC,MAAAA,U;;AACAC,MAAAA,K;;;;;;;;;OAED;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;qCAGjBO,mB,WADZF,OAAO,CAAC,qBAAD,C,gBAAR,MACaE,mBADb,SACyCN,SADzC,CACmD;AAAA;AAAA;AAAA,eACvCO,QADuC,GACtBC,SADsB;AAAA,eAEvCC,YAFuC,GAElBD,SAFkB;AAAA,eAGvCE,cAHuC,GAGhBF,SAHgB;AAAA,eAKvCG,IALuC,GAKdH,SALc;AAAA,eAM9BI,UAN8B,GAMT,GANS;AAAA;;AAQxCC,QAAAA,IAAI,GAAG;AACV,eAAKN,QAAL,GAAgB,KAAKO,IAAL,CAAUC,cAAV,CAAyB,UAAzB,CAAhB;AACA,eAAKN,YAAL,GAAoB,KAAKK,IAAL,CAAUC,cAAV,CAAyB,cAAzB,CAApB;AACA,eAAKL,cAAL,GAAsB,KAAKI,IAAL,CAAUC,cAAV,CAAyB,gBAAzB,CAAtB;AACA,eAAKL,cAAL,CAAoBM,MAApB,GAA6B,IAA7B;AACA,eAAKC,iBAAL;AACA,eAAKC,WAAL;AACH;;AAEOA,QAAAA,WAAW,GAAG;AAClB;AAAA;AAAA,wCAAWC,iBAAX,CAA6B,KAAKL,IAAlC,EAAwC,MAAM;AAC1C,gBAAI,KAAKH,IAAL,IAAa,KAAKA,IAAL,CAAUS,OAA3B,EAAoC;AAChC,mBAAKT,IAAL,CAAUS,OAAV;AACH;AACJ,WAJD,EAIG,IAJH,EAISZ,SAJT,EAIoB,KAJpB;AAKH;;AAEMa,QAAAA,OAAO,CAACV,IAAD,EAAyB;AACnC,eAAKA,IAAL,GAAYA,IAAZ;AACA;AAAA;AAAA,wCAAWW,cAAX,CAA0B,KAAKb,YAA/B,EAA6CE,IAAI,CAACY,IAAlD;AACH;;AAEMC,QAAAA,kBAAkB,CAACC,QAAD,EAAmB;AACxC,cAAIC,OAAO,GAAG;AAAA;AAAA,8BAAMC,KAAN,CAAYF,QAAQ,GAAG,KAAKb,UAA5B,EAAwC,CAAxC,EAA2C,GAA3C,CAAd;AACA,eAAKK,iBAAL,CAAuBS,OAAvB;AACH;;AAEOT,QAAAA,iBAAiB,CAACS,OAAD,EAAkB;AACvC,cAAIE,UAAkB,GAAG,KAAKlB,cAAL,CAAoBmB,YAApB,CAAiC5B,MAAjC,CAAzB;;AACA,cAAI2B,UAAJ,EAAgB;AACZ,gBAAIE,KAAY,GAAGF,UAAU,CAACE,KAA9B;AACAA,YAAAA,KAAK,CAACC,CAAN,GAAU;AAAA;AAAA,gCAAMJ,KAAN,CAAYD,OAAZ,EAAqB,CAArB,EAAwB,GAAxB,CAAV;AACAE,YAAAA,UAAU,CAACE,KAAX,GAAmBA,KAAnB;AACH;AACJ;;AAEME,QAAAA,OAAO,GAAG,CAEhB;;AA9C8C,O","sourcesContent":["import { _decorator, Color, Component, instantiate, Node, Prefab, Sprite, UIOpacity } from \"cc\";\nimport NodeHelper from \"../../../common/NodeHelper\";\nimport Utils from \"../../../utils/Utils\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('LevelSelectModeItem')\nexport class LevelSelectModeItem extends Component {\n    private img_mode: Node = undefined;\n    private lb_mode_name: Node = undefined;\n    private img_state_mask: Node = undefined;\n\n    private data: ISetDataModeItem = undefined;\n    private readonly maxOpacity: number = 100;\n\n    public init() {\n        this.img_mode = this.node.getChildByName(\"img_mode\");\n        this.lb_mode_name = this.node.getChildByName(\"lb_mode_name\");\n        this.img_state_mask = this.node.getChildByName(\"img_state_mask\");\n        this.img_state_mask.active = true;\n        this.changeMaskOpacity\n        this.addListener();\n    }\n\n    private addListener() {\n        NodeHelper.setNodeClickEvent(this.node, () => {\n            if (this.data && this.data.clickCb) {\n                this.data.clickCb();\n            }\n        }, this, undefined, false);\n    }\n\n    public setData(data: ISetDataModeItem) {\n        this.data = data;\n        NodeHelper.setLabelString(this.lb_mode_name, data.name);\n    }\n\n    public setProgressOpacity(progress: number) {\n        let opacity = Utils.clamp(progress * this.maxOpacity, 0, 255);\n        this.changeMaskOpacity(opacity);\n    }\n\n    private changeMaskOpacity(opacity: number) {\n        let opacityCpt: Sprite = this.img_state_mask.getComponent(Sprite);\n        if (opacityCpt) {\n            let color: Color = opacityCpt.color;\n            color.a = Utils.clamp(opacity, 0, 255);\n            opacityCpt.color = color;\n        }\n    }\n\n    public dispose() {\n\n    }\n}\n\nexport interface ISetDataModeItem {\n    name: string,\n    bg_path: string,\n    clickCb: Function,\n}"]}