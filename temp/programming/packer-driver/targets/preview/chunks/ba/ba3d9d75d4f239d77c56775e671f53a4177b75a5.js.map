{"version":3,"sources":["file:///D:/cocos_projects/physics_education_game/assets/scripts/modules/ui/game_start_ui/LevelSelectView.ts"],"names":["_decorator","instantiate","tween","Vec2","Vec3","UIPanel","UILayer","LogManager","NodeHelper","LoadType","ResManager","LevelSelectModeItem","Display","LevelItem","MapData","ccclass","property","LevelSelectView","node_center","undefined","node_mode_items","btn_close","btn_tip","node_block_click_mask","node_level_items","modeItems","levelItems","status","modeItemPath","levelItemPath","modeItemPrefab","levelItemPrefab","tweenShowAnimData","animTime","modeData","levelItemPool","init","_layer","normal","getInstance","loadAsset","PrefableRes","bundleName","prefab","node","getChildByName","setNodeSizeFullScreen","addListener","open","LevelSelectViewStatus","origin","initItemUI","active","setNodeClickEvent","closeBySelf","modeDict","getModeDatas","key","modeItem","push","index","name","modeName","bg_path","modeBg","clickCb","showOneMode","showModeLevel","modeId","length","error","panelName","onLoadFinish","screenWidth","getWindowSize","x","spacingWithSceenX","spacingX","startPosX","i","addChild","setPosX","itemCpt","getComponent","setData","showAnim","order","item","setSiblingIndex","to","position","scale","call","idle","start","mode","getModeDatasById","givebackLevelItem","removeAllChildren","layoutData","startPos","horizonCount","verticleCount","spacingY","showCount","Math","min","levelDatas","dataItem","cptItem","getLevelItem","level","levelId","mapPath","levelPath","isLock","pos","y","floor","setPosition","pop","cpt","destroy","destroyLevelItemPool","dispose","close","releaseAsset"],"mappings":"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","sourcesContent":["import { _decorator, instantiate, Node, Prefab, tween, UIOpacity, Vec2, Vec3 } from \"cc\";\nimport { UIPanel } from \"../../../manager/ui_manager/UIPanel\";\nimport { UILayer } from \"../../../manager/ui_manager/UIManager\";\nimport { GameManager, GameState } from \"../../../manager/game_manager/GameManager\";\nimport LogManager from \"../../../utils/LogManager\";\nimport NodeHelper from \"../../../common/NodeHelper\";\nimport { LoadType, ResManager } from \"../../../manager/ResManager\";\nimport { ISetDataModeItem, LevelSelectModeItem } from \"./LevelSelectModeItem\";\nimport { Display } from \"../../../common/Display\";\nimport { LevelItem } from \"./LevelItem\";\nimport MapData, { IMapConfig } from \"../../../manager/map_manager/MapData\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass('LevelSelectView')\nexport class LevelSelectView extends UIPanel {\n    private node_center: Node = undefined;\n    private node_mode_items: Node = undefined;\n\n    private btn_close: Node = undefined;\n    private btn_tip: Node = undefined;\n    private node_block_click_mask: Node = undefined;\n\n    private node_level_items: Node = undefined;\n\n    private modeItems: LevelSelectModeItem[] = undefined;\n    private levelItems: LevelItem[] = undefined;\n\n    private status: LevelSelectViewStatus = undefined;\n    private readonly modeItemPath: string = \"level_select_mode_item\";\n    private readonly levelItemPath: string = \"level_item\";\n    private modeItemPrefab: Prefab = undefined;\n    private levelItemPrefab: Prefab = undefined;\n    private readonly tweenShowAnimData = {\n        animTime: 0.7,\n    }\n\n    private modeData: IMapConfig[] = undefined;\n    public init() {\n        super.init();\n        this._layer = UILayer.normal;\n\n\n        ResManager.getInstance().loadAsset(this.levelItemPath, LoadType.PrefableRes, this.bundleName, (prefab: Prefab) => {\n            this.levelItemPrefab = prefab;\n        });\n\n        this.node_center = this.node.getChildByName(\"node_center\");\n        this.node_mode_items = this.node_center.getChildByName(\"node_mode_items\");\n        this.btn_close = this.node_center.getChildByName(\"btn_close\");\n        this.btn_tip = this.node_center.getChildByName(\"btn_tip\");\n        this.node_block_click_mask = this.node_center.getChildByName(\"node_block_click_mask\");\n        this.node_level_items = this.node_center.getChildByName(\"node_level_items\");\n        NodeHelper.setNodeSizeFullScreen(this.node_block_click_mask);\n        this.addListener();\n    }\n\n    public open() {\n        super.open();\n\n        this.status = LevelSelectViewStatus.origin;\n        this.initItemUI();\n        this.node_block_click_mask.active = false;\n    }\n\n    private addListener() {\n        NodeHelper.setNodeClickEvent(this.btn_close, () => {\n            this.closeBySelf();\n        }, this);\n\n        NodeHelper.setNodeClickEvent(this.btn_tip, () => {\n\n        }, this);\n    }\n\n    private initItemUI() {\n        this.modeItems = [];\n        this.modeData = [];\n        let modeDict = MapData.getInstance().getModeDatas();\n        for (let key in modeDict) {\n            const modeItem = modeDict[key];\n            this.modeData.push(modeItem);\n        }\n        let modeData: ISetDataModeItem[] = [];\n        for (let index = 0; index < this.modeData.length; index++) {\n            const modeItem = this.modeData[index];\n            modeData.push({\n                name: modeItem.modeName,\n                bg_path: modeItem.modeBg,\n                clickCb: () => {\n                    this.showOneMode(index);\n                    this.showModeLevel(modeItem.modeId);\n                }\n            })\n        }\n\n        if (!this.node_mode_items || !this.modeItems) {\n            LogManager.error(this.panelName, \"已经正在销毁了！！\");\n            return;\n        }\n        let onLoadFinish = () => {\n            let screenWidth: number = Display.getInstance().getWindowSize().x;\n            let spacingWithSceenX: number = 200;\n            let spacingX: number = (screenWidth - spacingWithSceenX * 2) / (modeData.length - 1);\n            let startPosX: number = -(screenWidth - spacingWithSceenX * 2) / 2;\n            for (let i = 0; i < modeData.length; i++) {\n                let node = instantiate(this.modeItemPrefab);\n                this.node_mode_items.addChild(node);\n                NodeHelper.setPosX(node, startPosX + spacingX * i);\n                let itemCpt: LevelSelectModeItem = node.getComponent(LevelSelectModeItem);\n                if (itemCpt) {\n                    itemCpt.init();\n                    itemCpt.setData(modeData[i]);\n                }\n                this.modeItems.push(itemCpt);\n            }\n        }\n        ResManager.getInstance().loadAsset(this.modeItemPath, LoadType.PrefableRes, this.bundleName, (prefab: Prefab) => {\n            this.modeItemPrefab = prefab;\n            onLoadFinish();\n        });\n    }\n\n    private showOneMode(index: number) {\n        if (index >= this.modeItems.length) {\n            return;\n        }\n        if (this.status != LevelSelectViewStatus.origin) {\n            return;\n        }\n        this.status = LevelSelectViewStatus.showAnim;\n        this.node_block_click_mask.active = true;\n        let order: number = 1;      // 用来标记当前是第几个小模式\n        for (let i = 0; i < this.modeItems.length; i++) {\n            const item = this.modeItems[i];\n            if (i == index) {\n                item.node.setSiblingIndex(this.modeItems.length - 1);\n                tween(item.node)\n                    .to(this.tweenShowAnimData.animTime, { position: new Vec3(-300, -40), scale: new Vec3(1.2, 1.2, 1) })\n                    .call(() => {\n                        this.status = LevelSelectViewStatus.idle;\n                        this.node_block_click_mask.active = false;\n                    })\n                    .start();\n            } else {\n                item.node.setSiblingIndex(this.modeItems.length - 1 - order);\n                tween(item.node)\n                    .to(this.tweenShowAnimData.animTime * 0.8, { position: new Vec3(-320 - 30 * order, -60), scale: new Vec3(1, 1, 1) }, {})\n                    .call(() => {\n\n                    })\n                    .start();\n                order++;\n            }\n        }\n    }\n\n    private showModeLevel(mode: number) {\n        const modeData: IMapConfig = MapData.getInstance().getModeDatasById(mode);\n        for (let i = 0; i < this.levelItems.length; i++) {\n            let item = this.levelItems[i];\n            if (item) {\n                this.givebackLevelItem(item);\n            }\n        }\n        this.node_level_items.removeAllChildren();\n        const layoutData = {\n            startPos: new Vec2(-180, 100),\n            horizonCount: 5,\n            verticleCount: 4,\n            spacingX: 100,\n            spacingY: 100,\n        }\n        let showCount = Math.min(modeData.levelDatas.length, layoutData.horizonCount * layoutData.verticleCount);\n        for (let i = 0; i < showCount; i++) {\n            const dataItem = modeData.levelDatas[i];\n            const cptItem = this.getLevelItem();\n            cptItem.setData({\n                level: dataItem.levelId,\n                mapPath: dataItem.levelPath,\n                isLock: dataItem.isLock == 1,\n            });\n            let pos = new Vec3(layoutData.startPos.x + i % layoutData.horizonCount * layoutData.spacingX,\n                layoutData.startPos.y + Math.floor(i / layoutData.horizonCount) * layoutData.spacingY);\n            cptItem.node.setPosition(pos);\n        }\n    }\n\n    //#region 关卡item的对象池\n    private levelItemPool: LevelItem[] = undefined;\n\n    private getLevelItem(): LevelItem {\n        if (!this.levelItemPool) {\n            this.levelItemPool = [];\n        }\n        let item = this.levelItemPool.pop();\n        if (item) {\n            return item;\n        }\n        let node = instantiate(this.levelItemPrefab);\n        let cpt = node.getComponent(LevelItem);\n        if (cpt) {\n            return cpt;\n        } else {\n            node.destroy();\n            return undefined;\n        }\n    }\n\n    private givebackLevelItem(item: LevelItem) {\n        if (!item) {\n            return;\n        }\n        if (!this.levelItemPool) {\n            this.levelItemPool = [];\n        }\n        item.node.active = false;\n        this.levelItemPool.push(item);\n    }\n\n    private destroyLevelItemPool() {\n        if (this.levelItemPool) {\n            for (let i = 0; i < this.levelItemPool.length; i++) {\n                this.levelItemPool[i]?.dispose();\n            }\n        }\n    }\n\n    //#endregion\n    public close() {\n        super.close();\n    }\n\n    public dispose() {\n        super.dispose();\n        if (this.modeItems) {\n            for (let i = 0; i < this.modeItems.length; i++) {\n                this.modeItems[i]?.dispose();\n            }\n        }\n        if (this.levelItems) {\n            for (let i = 0; i < this.levelItems.length; i++) {\n                this.levelItems[i]?.dispose();\n            }\n        }\n        this.destroyLevelItemPool();\n        ResManager.getInstance().releaseAsset(this.modeItemPrefab);\n        ResManager.getInstance().releaseAsset(this.levelItemPrefab);\n    }\n}\n\nenum LevelSelectViewStatus {\n    origin = 1,     // 初始状态\n    showAnim = 2,   // 聚拢动画中\n    idle = 3,       // 聚拢后静态\n    rotateAnim = 4, // 旋转动画中\n}"]}